{"version":3,"file":"racing-bars.umd.js","sources":["../../src/lib/load-data.ts","../../src/lib/data/data.actions.ts","../../src/lib/data/data.reducer.ts","../../src/lib/options/options.actions.ts","../../src/lib/options/options.reducer.ts","../../src/lib/ticker/ticker.actions.ts","../../src/lib/ticker/ticker.reducer.ts","../../src/lib/ticker/ticker.ts","../../src/lib/store/actions.ts","../../src/lib/store/reducer.ts","../../src/lib/store/store.ts","../../src/lib/store/state.ts","../../src/lib/utils.ts","../../src/lib/dates.ts","../../src/lib/data-utils.ts","../../src/lib/icons.ts","../../src/lib/elements.ts","../../src/lib/renderer.ts","../../src/lib/styles/generated-styles.ts","../../src/lib/styles/style-inject.ts","../../src/lib/events.ts","../../src/lib/scroller.ts","../../src/lib/race.ts"],"sourcesContent":["import * as d3 from './d3';\n\nexport function loadData(URL: string, type: 'json' | 'csv' | 'tsv' | 'xml' = 'json') {\n  switch (type) {\n    case 'json':\n      return d3.json(URL);\n    case 'csv':\n      return d3.csv(URL);\n    case 'tsv':\n      return d3.tsv(URL);\n    case 'xml':\n      return d3.xml(URL);\n    default:\n      throw new Error(`Unsupported data type: ${type}`);\n  }\n}\n","import { DataAction, DataCollections } from './data.models';\n\nexport const actionTypes = {\n  dataLoaded: 'data/loaded',\n  addFilter: 'data/addFilter',\n  removeFilter: 'data/removeFilter',\n  toggleFilter: 'data/toggleFilter',\n  resetFilters: 'data/resetFilters',\n  allExceptFilter: 'data/allExceptFilter',\n  addSelection: 'data/addSelection',\n  removeSelection: 'data/removeSelection',\n  toggleSelection: 'data/toggleSelection',\n  resetSelections: 'data/resetSelections',\n};\n\nexport const dataLoaded = (dataCollections: DataCollections): DataAction => ({\n  type: actionTypes.dataLoaded,\n  payload: dataCollections,\n});\n\nexport const addFilter = (group: string): DataAction => ({\n  type: actionTypes.addFilter,\n  payload: group,\n});\n\nexport const removeFilter = (group: string): DataAction => ({\n  type: actionTypes.removeFilter,\n  payload: group,\n});\n\nexport const toggleFilter = (group: string): DataAction => ({\n  type: actionTypes.toggleFilter,\n  payload: group,\n});\n\nexport const resetFilters = (): DataAction => ({\n  type: actionTypes.resetFilters,\n});\n\nexport const allExceptFilter = (group: string): DataAction => ({\n  type: actionTypes.allExceptFilter,\n  payload: group,\n});\n\nexport const addSelection = (selection: string): DataAction => ({\n  type: actionTypes.addSelection,\n  payload: selection,\n});\n\nexport const removeSelection = (selection: string): DataAction => ({\n  type: actionTypes.removeSelection,\n  payload: selection,\n});\n\nexport const toggleSelection = (selection: string): DataAction => ({\n  type: actionTypes.toggleSelection,\n  payload: selection,\n});\n\nexport const resetSelections = (): DataAction => ({\n  type: actionTypes.resetSelections,\n});\n","import { actionTypes } from './data.actions';\nimport { DataState, DataAction, DataCollections } from './data.models';\n\nconst initialState: DataState = {\n  names: [],\n  groups: [],\n  dates: [],\n  formattedDates: [],\n  groupFilter: [],\n  selected: [],\n};\n\nexport function dataReducer(state = initialState, action: DataAction): DataState {\n  switch (action.type) {\n    case actionTypes.dataLoaded: {\n      const collections = action.payload as DataCollections;\n      return {\n        ...state,\n        names: [...collections.names],\n        groups: [...collections.groups],\n        dates: [...collections.dates],\n        formattedDates: [...collections.formattedDates],\n      };\n    }\n\n    case actionTypes.addFilter:\n      return {\n        ...state,\n        groupFilter: addToArray(state.groupFilter, action.payload as string),\n      };\n\n    case actionTypes.removeFilter:\n      return {\n        ...state,\n        groupFilter: removeFromArray(state.groupFilter, action.payload as string),\n      };\n\n    case actionTypes.toggleFilter:\n      return {\n        ...state,\n        groupFilter: toggleItem(state.groupFilter, action.payload as string),\n      };\n\n    case actionTypes.resetFilters:\n      return {\n        ...state,\n        groupFilter: [],\n      };\n\n    case actionTypes.allExceptFilter:\n      return {\n        ...state,\n        groupFilter: removeFromArray(state.groups, action.payload as string),\n      };\n\n    case actionTypes.addSelection:\n      return {\n        ...state,\n        selected: addToArray(state.selected, action.payload as string),\n      };\n\n    case actionTypes.removeSelection:\n      return {\n        ...state,\n        selected: removeFromArray(state.selected, action.payload as string),\n      };\n\n    case actionTypes.toggleSelection:\n      return {\n        ...state,\n        selected: toggleItem(state.selected, action.payload as string),\n      };\n\n    case actionTypes.resetSelections:\n      return {\n        ...state,\n        selected: [],\n      };\n\n    default:\n      return state;\n  }\n}\n\nfunction addToArray(array: string[], item: string) {\n  const arr = [...array];\n  if (!arr.includes(item)) {\n    arr.push(item);\n  }\n  return arr;\n}\n\nfunction removeFromArray(array: string[], item: string) {\n  return array.filter((x) => x !== item);\n}\n\nfunction toggleItem(array: string[], item: string) {\n  return array.includes(item) ? removeFromArray(array, item) : addToArray(array, item);\n}\n","import { Options, OptionsAction, RequiredOptions } from './options.models';\r\n\r\nexport const actionTypes = {\r\n  optionsLoaded: 'options/loaded',\r\n  changeOptions: 'options/change',\r\n  optionsChanged: 'options/changed',\r\n};\r\n\r\nexport const optionsLoaded = (options: Options | RequiredOptions): OptionsAction => ({\r\n  type: actionTypes.optionsLoaded,\r\n  payload: options,\r\n});\r\n\r\nexport const changeOptions = (options: Options): OptionsAction => ({\r\n  type: actionTypes.changeOptions,\r\n  payload: options,\r\n});\r\n\r\nexport const optionsChanged = (options: Options): OptionsAction => ({\r\n  type: actionTypes.optionsChanged,\r\n  payload: options,\r\n});\r\n","import { getDateString } from '../dates';\nimport { Options, OptionsAction } from './options.models';\nimport { actionTypes } from './options.actions';\n\nconst initialState: Options = {\n  selector: '#race',\n  dataShape: 'long',\n  fillDateGaps: false,\n  fillDateGapsValue: 'last',\n  startDate: '',\n  endDate: '',\n  colorSeed: '',\n  showGroups: true,\n  tickDuration: 500,\n  topN: 10,\n  disableClickEvents: true,\n  disableKeyboardEvents: false,\n  autorun: true,\n  loop: false,\n  injectStyles: true,\n  title: '',\n  subTitle: '',\n  caption: '',\n  dateCounter: 'MM/YYYY',\n  labelsOnBars: true,\n  labelsWidth: 100,\n  showIcons: false,\n  showControls: 'all',\n  showOverlays: 'none',\n  inputHeight: '',\n  inputWidth: '',\n  minHeight: 300,\n  minWidth: 500,\n  height: '',\n  width: '',\n  theme: 'light',\n  colorMap: {},\n  fixedScale: false,\n  highlightBars: false,\n  selectBars: false,\n};\n\nexport function optionsReducer(state = initialState, action: OptionsAction): Options {\n  switch (action.type) {\n    case actionTypes.optionsLoaded:\n      const startDate = action.payload.startDate ? getDateString(action.payload.startDate) : '';\n      const endDate = action.payload.endDate ? getDateString(action.payload.endDate) : '';\n      const inputHeight = action.payload.height;\n      const inputWidth = action.payload.width;\n      return {\n        ...state,\n        ...action.payload,\n        startDate,\n        endDate,\n        inputHeight,\n        inputWidth,\n      };\n\n    case actionTypes.changeOptions:\n      return {\n        ...state,\n        ...action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","import { TickerAction } from './ticker.models';\r\n\r\nexport const actionTypes = {\r\n  initialize: 'ticker/initialize',\r\n  updateDate: 'ticker/updateDate',\r\n  setRunning: 'ticker/setRunning',\r\n  setFirst: 'ticker/setFirst',\r\n  setLast: 'ticker/setLast',\r\n  inc: 'ticker/inc',\r\n  dec: 'ticker/dec',\r\n};\r\n\r\nexport const initialize = (dates: string[]): TickerAction => ({\r\n  type: actionTypes.initialize,\r\n  payload: dates,\r\n});\r\n\r\nexport const updateDate = (currentDate: string): TickerAction => ({\r\n  type: actionTypes.updateDate,\r\n  payload: currentDate,\r\n});\r\n\r\nexport const setRunning = (running: boolean): TickerAction => ({\r\n  type: actionTypes.setRunning,\r\n  payload: running,\r\n});\r\n\r\nexport const setFirst = (): TickerAction => ({\r\n  type: actionTypes.setFirst,\r\n});\r\n\r\nexport const setLast = (): TickerAction => ({\r\n  type: actionTypes.setLast,\r\n});\r\n\r\nexport const inc = (value = 1): TickerAction => ({\r\n  type: actionTypes.inc,\r\n  payload: value,\r\n});\r\n\r\nexport const dec = (value = 1): TickerAction => ({\r\n  type: actionTypes.dec,\r\n  payload: value,\r\n});\r\n","import { TickerState, TickerAction } from './ticker.models';\r\nimport { actionTypes } from './ticker.actions';\r\n\r\nconst initialState: TickerState = {\r\n  isRunning: false,\r\n  currentDate: '',\r\n  isFirstDate: true,\r\n  isLastDate: false,\r\n  dates: [],\r\n};\r\n\r\nexport function tickerReducer(state = initialState, action: TickerAction): TickerState {\r\n  switch (action.type) {\r\n    case actionTypes.initialize: {\r\n      const dates = action.payload as string[];\r\n      return {\r\n        ...state,\r\n        isRunning: false,\r\n        currentDate: dates[0],\r\n        isFirstDate: true,\r\n        isLastDate: false,\r\n        dates,\r\n      };\r\n    }\r\n\r\n    case actionTypes.updateDate: {\r\n      const currentDate = action.payload as string;\r\n      if (state.dates.indexOf(currentDate) === -1) {\r\n        return { ...state };\r\n      }\r\n      return {\r\n        ...state,\r\n        currentDate,\r\n        isFirstDate: currentDate === state.dates[0],\r\n        isLastDate: currentDate === state.dates[state.dates.length - 1],\r\n      };\r\n    }\r\n\r\n    case actionTypes.setRunning: {\r\n      return {\r\n        ...state,\r\n        isRunning: action.payload as boolean,\r\n      };\r\n    }\r\n\r\n    case actionTypes.setFirst: {\r\n      return {\r\n        ...state,\r\n        currentDate: state.dates[0],\r\n        isFirstDate: true,\r\n        isLastDate: false,\r\n      };\r\n    }\r\n\r\n    case actionTypes.setLast: {\r\n      return {\r\n        ...state,\r\n        currentDate: state.dates[state.dates.length - 1],\r\n        isFirstDate: false,\r\n        isLastDate: true,\r\n      };\r\n    }\r\n\r\n    case actionTypes.inc: {\r\n      const currentIndex = state.dates.indexOf(state.currentDate);\r\n      const lastIndex = state.dates.length - 1;\r\n      const incValue = action.payload as number;\r\n      const newDate =\r\n        currentIndex + incValue > lastIndex\r\n          ? state.dates[lastIndex]\r\n          : state.dates[currentIndex + incValue];\r\n      return {\r\n        ...state,\r\n        currentDate: newDate,\r\n        isFirstDate: newDate === state.dates[0],\r\n        isLastDate: newDate === state.dates[lastIndex],\r\n      };\r\n    }\r\n\r\n    case actionTypes.dec: {\r\n      const currentIndex = state.dates.indexOf(state.currentDate);\r\n      const decValue = action.payload as number;\r\n      const newDate =\r\n        currentIndex - decValue < 0 ? state.dates[0] : state.dates[currentIndex - decValue];\r\n      return {\r\n        ...state,\r\n        currentDate: newDate,\r\n        isFirstDate: newDate === state.dates[0],\r\n        isLastDate: newDate === state.dates[state.dates.length - 1],\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import * as d3 from '../d3';\nimport { store, actions } from '../store';\nimport { Ticker } from './ticker.models';\n\nexport function createTicker(): Ticker {\n  store.dispatch(actions.ticker.initialize(store.getState().data.dates));\n\n  let ticker: d3.Timer;\n\n  function start() {\n    ticker = d3.interval(showRace, store.getState().options.tickDuration);\n    store.dispatch(actions.ticker.setRunning(true));\n\n    function showRace(_: number) {\n      if (store.getState().ticker.isLastDate) {\n        if (store.getState().options.loop) {\n          loop();\n        } else {\n          stop();\n        }\n      } else {\n        store.dispatch(actions.ticker.inc());\n      }\n    }\n  }\n\n  function stop() {\n    if (ticker) {\n      ticker.stop();\n    }\n    store.dispatch(actions.ticker.setRunning(false));\n  }\n\n  function skipBack() {\n    stop();\n    store.dispatch(actions.ticker.setFirst());\n  }\n\n  function loop() {\n    store.dispatch(actions.ticker.setFirst());\n  }\n\n  function skipForward() {\n    stop();\n    store.dispatch(actions.ticker.setLast());\n  }\n\n  function toggle() {\n    if (store.getState().ticker.isLastDate) {\n      skipBack();\n      start();\n    } else if (store.getState().ticker.isRunning) {\n      stop();\n    } else {\n      if (!store.getState().ticker.isFirstDate) {\n        // to avoid lastValue flicker\n        store.dispatch(actions.ticker.inc());\n      }\n      start();\n    }\n  }\n\n  function goToDate(date: string) {\n    store.dispatch(actions.ticker.updateDate(date));\n  }\n\n  return {\n    start,\n    stop,\n    skipBack,\n    loop,\n    skipForward,\n    toggle,\n    goToDate,\n  };\n}\n","import * as data from '../data';\nimport * as options from '../options';\nimport * as ticker from '../ticker';\n\nexport const actions = {\n  data,\n  options,\n  ticker,\n};\n","import { optionsReducer, OptionsAction } from '../options';\nimport { tickerReducer, TickerAction } from '../ticker';\nimport { dataReducer, DataAction } from '../data';\nimport { Action, State } from './models';\n\nexport function rootReducer(state: State, action: Action): State {\n  return {\n    data: dataReducer(state.data, action as DataAction),\n    options: optionsReducer(state.options, action as OptionsAction),\n    ticker: tickerReducer(state.ticker, action as TickerAction),\n  };\n}\n","import { Action, Reducer, State, Subscriber } from './models';\nimport { rootReducer } from './reducer';\n\nexport function createStore(reducer: Reducer = rootReducer, preloadedState?: State) {\n  let state = {} as State;\n\n  if (preloadedState) {\n    state = preloadedState;\n  }\n\n  function dispatch(action: Action) {\n    state = reducer(state, action);\n    notifySubscribers();\n    return action;\n  }\n\n  function getState() {\n    return state;\n  }\n\n  const subscribers: Subscriber[] = [];\n\n  function subscribe(fn: Subscriber) {\n    subscribers.push(fn);\n    const index = subscribers.length - 1;\n\n    return {\n      unsubscribe: () => {\n        subscribers.splice(index, 1);\n      },\n    };\n  }\n\n  function notifySubscribers() {\n    subscribers.forEach((fn: Subscriber) => {\n      fn();\n    });\n  }\n\n  return {\n    getState,\n    dispatch,\n    subscribe,\n  };\n}\n","import { createStore } from './store';\r\nimport { rootReducer } from './reducer';\r\n\r\nexport const store = createStore(rootReducer);\r\n","import * as d3 from './d3';\n\nimport { Data } from './data';\nimport { store } from './store';\nimport { formatDate } from './dates';\nimport { ParamFunction } from './options';\n\nexport function getColor(d: Data) {\n  const { names, groups } = store.getState().data;\n  const { showGroups, colorSeed, colorMap } = store.getState().options;\n\n  if (d.color) {\n    return d.color;\n  }\n\n  const useGroup = Boolean(d.group) && showGroups && groups.length > 0;\n  let values = useGroup ? groups : names;\n  if (colorSeed) {\n    values = shuffle(values, toNumber(colorSeed));\n  }\n  const currentValue = (useGroup ? d.group : d.name) as string;\n  let index = values.indexOf(currentValue);\n\n  if (colorMap) {\n    if (Array.isArray(colorMap)) {\n      while (index > colorMap.length - 1) {\n        index = index - colorMap.length;\n      }\n      return colorMap[index];\n    } else {\n      if (colorMap[currentValue]) {\n        return colorMap[currentValue];\n      }\n    }\n  }\n\n  const negativeIfOdd = index % 2 === 0 ? 1 : -1;\n  const lumVariation = (random(currentValue) / 10) * negativeIfOdd;\n  const HueSpacing = 360 / (values.length + 1);\n  const hue = (values.indexOf(currentValue) + 1) * HueSpacing;\n  return d3.hsl(hue, 0.75, 0.75 + lumVariation);\n}\n\nexport function getIconID(d: Data) {\n  return 'icon-' + d.name.toLowerCase().split(' ').join('_');\n}\n\nexport function zeroPad(n: string, w: number) {\n  while (n.toString().length < w) {\n    n = '0' + n;\n  }\n  return n;\n}\n\nfunction toNumber(s: string | number) {\n  s = String(s);\n  let nums = '';\n  for (let i = 0; i < s.length; i++) {\n    nums += zeroPad(String(s.charCodeAt(i)), 3);\n  }\n  return +nums;\n}\n\nexport function random(InputSeed: string | number) {\n  const seed = toNumber(InputSeed);\n  const x = Math.sin(seed) * 10000;\n  return x - Math.floor(x);\n}\n\nexport function randomString(prefix: string, n: number) {\n  const rnd = Array(3)\n    .fill(null)\n    .map(() => Math.random().toString(36).substr(2))\n    .join('');\n  return prefix + rnd.slice(-n);\n}\n\nexport function shuffle(arr: any[], seed: number) {\n  const array = [...arr];\n  let m = array.length;\n  let t;\n  let i;\n\n  while (m) {\n    i = Math.floor(random(seed) * m--);\n    t = array[m];\n    array[m] = array[i];\n    array[i] = t;\n    ++seed;\n  }\n\n  return array;\n}\n\nexport function generateId(prefix = 'racingbars', n = 8) {\n  return randomString(prefix, n);\n}\n\nexport function getHeight(element: HTMLElement, minHeight: number, height?: string) {\n  let newHeight;\n  if (!height) {\n    newHeight = element.getBoundingClientRect().height;\n  } else if (String(height).startsWith('window')) {\n    const scale = +height.split('*')[1] || 1;\n    newHeight = window.innerHeight * scale;\n  } else {\n    newHeight = +height;\n  }\n  return newHeight > minHeight ? newHeight : minHeight;\n}\n\nexport function getWidth(element: HTMLElement, minWidth: number, width?: string) {\n  let newWidth;\n  if (!width) {\n    newWidth = element.getBoundingClientRect().width;\n  } else if (String(width).startsWith('window')) {\n    const scale = +width.split('*')[1] || 1;\n    newWidth = window.innerWidth * scale;\n  } else {\n    newWidth = +width;\n  }\n  return newWidth > minWidth ? newWidth : minWidth;\n}\n\nexport function getElement(className: string) {\n  const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n  return element.querySelector('.' + className) as HTMLElement;\n}\n\nexport function showElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.style.display = 'flex';\n  }\n}\n\nexport function hideElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.style.display = 'none';\n  }\n}\n\nexport function removeElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.remove();\n  }\n}\n\nexport function addEventHandler(className: string, event: string, handler: () => void) {\n  const element = getElement(className);\n  if (element) {\n    element.addEventListener(event, handler);\n  }\n}\n\nexport function getText(param: string | ParamFunction, dateSlice: Data[], isDate = false): string {\n  if (typeof param === 'function') {\n    return param(\n      formatDate(store.getState().ticker.currentDate),\n      dateSlice.map((d) => ({ ...d, date: formatDate(d.date) })),\n      store.getState().ticker.dates.map((date) => formatDate(date)),\n    );\n  }\n  if (isDate) {\n    return formatDate(store.getState().ticker.currentDate, param);\n  }\n  return param;\n}\n\nexport function safeName(name: string) {\n  // replace non-alphanumeric with underscore\n  return name.replace(/[\\W]+/g, '_');\n}\n\nexport function toggleClass(selector: string, className: string) {\n  d3.select(selector) //\n    .classed(className, function () {\n      return !d3.select(this).classed(className);\n    });\n}\n\nfunction debounce(func: any, wait: number, immediate = false) {\n  let timeout: any;\n  return function (_clicks: any, _Fn: (clicks: number) => void) {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    const context = this;\n    const args = arguments;\n    const later = function () {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\nexport const getClicks = debounce(function (event: any, Fn: (event: any) => void) {\n  Fn(event);\n}, 250);\n","import { Data } from './data';\nimport { zeroPad } from './utils';\n\nexport const getDates = (data: Data[]) => Array.from(new Set(data.map((d) => d.date))).sort();\n\nexport function getDateString(inputDate: string | Date) {\n  const date = new Date(inputDate);\n  if (isNaN(+date)) {\n    throw new Error(`\"${inputDate}\" is not a valid date`);\n  }\n\n  const year = date.getFullYear();\n\n  let month = (1 + date.getMonth()).toString();\n  month = zeroPad(month, 2);\n\n  let day = date.getDate().toString();\n  day = zeroPad(day, 2);\n\n  return `${year}${month}${day}`;\n}\n\nexport function formatDate(dateStr: string, format = 'YYYY-MM-DD') {\n  const year = dateStr.slice(0, 4);\n  const month = dateStr.slice(4, 6);\n  const day = dateStr.slice(6, 8);\n  const date = new Date(`${year}-${month}-${day}`);\n  const weekDayIndex = String(date.getDay());\n  const monthNames: { [key: string]: string } = {\n    '01': 'Jan',\n    '02': 'Feb',\n    '03': 'Mar',\n    '04': 'Apr',\n    '05': 'May',\n    '06': 'Jun',\n    '07': 'Jul',\n    '08': 'Aug',\n    '09': 'Sep',\n    '10': 'Oct',\n    '11': 'Nov',\n    '12': 'Dec',\n  };\n\n  const weekDays: { [key: string]: string } = {\n    '0': 'Sun',\n    '1': 'Mon',\n    '2': 'Tue',\n    '3': 'Wed',\n    '4': 'Thu',\n    '5': 'Fri',\n    '6': 'Sat',\n  };\n\n  return format\n    .replace('MMM', monthNames[month])\n    .replace('DDD', weekDays[weekDayIndex])\n    .replace('YYYY', year)\n    .replace('MM', month)\n    .replace('DD', day);\n}\n","import { formatDate, getDateString, getDates } from './dates';\nimport { Data, WideData } from './data';\nimport { store, actions } from './store';\nimport { Options } from './options';\n\nexport function prepareData(rawData: Data[]) {\n  const options = store.getState().options;\n\n  let data = rawData\n    .map((d) => ({ ...d, date: getDateString(d.date) }))\n    .filter((d) => (options.startDate ? d.date >= options.startDate : true))\n    .filter((d) => (options.endDate ? d.date <= options.endDate : true));\n\n  if (options.dataShape === 'wide') {\n    data = wideDataToLong(data);\n  }\n\n  if (options.fillDateGaps) {\n    data = fillGaps(data, options.fillDateGaps);\n  }\n\n  data = data.map((d) => {\n    const name = d.name ? d.name : '';\n    const value = isNaN(+d.value) ? 0 : +d.value;\n    return { ...d, name, value };\n  });\n\n  data = calculateLastValues(data);\n\n  loadDataCollectionsToState(data);\n\n  return data;\n}\n\nfunction loadDataCollectionsToState(data: Data[]) {\n  const names = Array.from(new Set(data.map((d) => d.name))).sort() as string[];\n  const groups = Array.from(new Set(data.map((d) => d.group)))\n    .filter(Boolean)\n    .sort() as string[];\n  const dates = getDates(data);\n  const formattedDates = dates.map((date: string) => formatDate(date));\n\n  store.dispatch(actions.data.dataLoaded({ names, groups, dates, formattedDates }));\n}\n\nfunction calculateLastValues(data: Data[]) {\n  return data\n    .sort((a, b) => a.name.localeCompare(b.name) || a.date.localeCompare(b.date))\n    .reduce((acc: Data[], curr) => {\n      if (acc.length === 0) {\n        curr.lastValue = curr.value;\n      } else {\n        const last = acc[acc.length - 1];\n        if (curr.name === last.name) {\n          curr.lastValue = last.value;\n        } else {\n          curr.lastValue = curr.value;\n        }\n      }\n      return [...acc, curr];\n    }, [])\n    .sort((a, b) => a.date.localeCompare(b.date));\n}\n\nfunction wideDataToLong(wide: WideData[]) {\n  const long = [] as Data[];\n  wide.forEach((item: WideData) => {\n    for (const [key, value] of Object.entries(item)) {\n      long.push({\n        date: item.date,\n        name: key,\n        value: Number(value),\n      });\n    }\n  });\n  return long;\n}\n\nfunction fillGaps(data: Data[], period: Options['fillDateGaps']) {\n  if (!period) {\n    return data;\n  }\n\n  const dates = getDates(data);\n  const minDate = new Date(formatDate(dates[0]));\n  const maxDate = new Date(formatDate(dates[dates.length - 1]));\n\n  const next = {\n    years: (dt: Date) => {\n      dt.setFullYear(dt.getFullYear() + 1);\n    },\n    months: (dt: Date) => {\n      dt.setMonth(dt.getMonth() + 1);\n    },\n    days: (dt: Date) => {\n      dt.setDate(dt.getDate() + 1);\n    },\n  };\n  if (!next[period]) {\n    return data;\n  }\n\n  const dateRange: string[] = [];\n  for (const date = minDate; date < maxDate; next[period](date)) {\n    dateRange.push(getDateString(date));\n  }\n\n  dateRange.forEach((date, index) => {\n    if (data.filter((d) => d.date === date).length > 0) {\n      return;\n    }\n\n    const missing = data\n      .filter((d) => d.date === dateRange[index - 1])\n      .map((d) =>\n        // const value = {\n        //   last: d.value,\n        //   zero: 0,\n        // }\n        ({\n          ...d,\n          date,\n          // value: value[fillDateGapsValue],\n        }),\n      );\n\n    data.push(...missing);\n  });\n\n  return data;\n}\n\nexport function getDateSlice(data: Data[], date: string) {\n  const slice = data\n    .filter((d) => d.date === date && !isNaN(d.value))\n    .filter((d) => (!!d.group ? !store.getState().data.groupFilter.includes(d.group) : true))\n    .sort((a, b) => b.value - a.value)\n    .map((d, i) => ({ ...d, rank: i }));\n\n  const emptyData = [{ name: '', value: 0, lastValue: 0, date, rank: 1 }];\n\n  return slice.length > 0 ? slice : emptyData;\n}\n","export const icons = {\r\n  skipBack: `<svg viewBox=\"0 0 32 32\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M28.46,4a3,3,0,0,0-3,.07l-15.2,9.41A3,3,0,0,0,9,15V5A3,3,0,0,0,6,2H5A3,3,0,0,0,2,5V27a3,3,0,0,0,3,3H6a3,3,0,0,0,3-3V17a3,3,0,0,0,1.22,1.53L25.42,28a3,3,0,0,0,1.58.46,3,3,0,0,0,3-3V6.59A3,3,0,0,0,28.46,4Z\"/></g></svg>`,\r\n  play: `<svg viewBox=\"0 0 32 32\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M26.78,13.45,11.58,4A3,3,0,0,0,7,6.59V25.41a3,3,0,0,0,3,3A3,3,0,0,0,11.58,28l15.2-9.41a3,3,0,0,0,0-5.1Z\"/></g></svg>`,\r\n  pause: `<svg viewBox=\"0 0 32 32\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\" stroke=\"currentColor\" xmlns:svg=\"http://www.w3.org/2000/svg\"><g transform=\"translate(-17)\"><path d=\"m 27,2 h -1 c -1.656854,0 -3,1.3431458 -3,3 v 12 c -0.04755,3.269656 0,6.666667 0,10 0,1.656854 1.343146,3 3,3 h 1 c 1.656854,0 3,-1.343146 3,-3 V 5 C 30,3.3431458 28.656854,2 27,2 Z\" /></g><g transform=\"translate(-4)\"><path d=\"m 27,2 h -1 c -1.656854,0 -3,1.3431458 -3,3 v 12 c -0.04755,3.269656 0,6.666667 0,10 0,1.656854 1.343146,3 3,3 h 1 c 1.656854,0 3,-1.343146 3,-3 V 5 C 30,3.3431458 28.656854,2 27,2 Z\" /></g></svg>`,\r\n  skipForward: `<svg viewBox=\"0 0 32 32\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"none\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M27,2H26a3,3,0,0,0-3,3V15a3,3,0,0,0-1.22-1.53L6.58,4A3,3,0,0,0,2,6.59V25.41a3,3,0,0,0,3,3A3,3,0,0,0,6.58,28l15.2-9.41A3,3,0,0,0,23,17V27a3,3,0,0,0,3,3h1a3,3,0,0,0,3-3V5A3,3,0,0,0,27,2Z\"/></g></svg>`,\r\n  overlayPlay: `<svg viewBox=\"0 0 32 32\" fill=\"currentColor\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M26.78,13.45,11.58,4A3,3,0,0,0,7,6.59V25.41a3,3,0,0,0,3,3A3,3,0,0,0,11.58,28l15.2-9.41a3,3,0,0,0,0-5.1Z\"/></g></svg>`,\r\n  overlayRepeat: `<svg viewBox=\"0 0 32 32\" fill=\"currentColor\" stroke=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"M18,4A12,12,0,0,0,6.05,15H3a1,1,0,0,0-.88.53,1,1,0,0,0,0,1l4,6a1,1,0,0,0,1.66,0l4-6a1,1,0,0,0,.05-1A1,1,0,0,0,11,15H8.05A10,10,0,1,1,18,26a1,1,0,0,0,0,2A12,12,0,0,0,18,4Z\"/></g></svg>`,\r\n};\r\n","export const elements = {\r\n  controls: 'controls',\r\n  skipBack: 'skipBack',\r\n  play: 'play',\r\n  pause: 'pause',\r\n  skipForward: 'skipForward',\r\n  overlay: 'overlay',\r\n  overlayPlay: 'overlayPlay',\r\n  overlayRepeat: 'overlayRepeat',\r\n};\r\n","import * as d3 from './d3';\n\nimport { icons } from './icons';\nimport { elements } from './elements';\nimport { Renderer } from './models';\nimport { Data } from './data';\nimport { store, actions } from './store';\nimport {\n  getHeight,\n  getWidth,\n  getElement,\n  hideElement,\n  showElement,\n  getText,\n  getColor,\n  getIconID,\n  safeName,\n  toggleClass,\n  getClicks,\n} from './utils';\nimport { getDateSlice } from './data-utils';\n\nexport function createRenderer(data: Data[]): Renderer {\n  let margin: { top: number; right: number; bottom: number; left: number };\n  let svg: any;\n  let x: d3.ScaleLinear<number, number>;\n  let y: d3.ScaleLinear<number, number>;\n  let xAxis: d3.Axis<number | { valueOf(): number }>;\n  const titlePadding = 5;\n  let barPadding: number;\n  let labelPadding: number;\n  let barWidth: (d: Data) => number;\n  let barHeight: number;\n  let barHalfHeight: number;\n  let defs: any;\n  let iconSize: number;\n  let iconSpace: number;\n  let titleText: any;\n  let subTitleText: any;\n  let captionText: any;\n  let dateCounterText: any;\n  let labelX: number | ((d: Data) => number);\n  let barY: (d: Data) => number;\n  let height: number;\n  let width: number;\n  let maxValue: number;\n\n  const groups = store.getState().data.groups;\n  const { showGroups, highlightBars, selectBars } = store.getState().options;\n\n  function renderInitalView() {\n    const {\n      selector,\n      title,\n      subTitle,\n      caption,\n      dateCounter,\n      labelsOnBars,\n      showIcons,\n      labelsWidth,\n      inputHeight,\n      inputWidth,\n      minHeight,\n      minWidth,\n      topN,\n      fixedScale,\n    } = store.getState().options;\n\n    const TotalDateSlice = getDateSlice(data, store.getState().ticker.currentDate);\n    const dateSlice = TotalDateSlice.slice(0, store.getState().options.topN);\n    if (dateSlice.length === 0) {\n      return;\n    }\n\n    const element = document.querySelector(selector) as HTMLElement;\n    element.innerHTML = '';\n\n    height = getHeight(element, minHeight, inputHeight);\n    width = getWidth(element, minWidth, inputWidth);\n\n    renderInitialFrame();\n    renderControls();\n    renderOverlays();\n    updateControls();\n\n    function renderInitialFrame() {\n      const labelsArea = labelsOnBars ? 0 : labelsWidth;\n      const groupsArea = showGroups ? 40 : 0;\n\n      margin = {\n        top: 80 + groupsArea,\n        right: 0,\n        bottom: 5,\n        left: 0 + labelsArea,\n      };\n\n      svg = d3 //\n        .select(selector)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height);\n\n      titleText = svg //\n        .append('text')\n        .attr('class', 'title')\n        .attr('x', titlePadding)\n        .attr('y', 24)\n        .html(getText(title, TotalDateSlice));\n\n      subTitleText = svg //\n        .append('text')\n        .attr('class', 'subTitle')\n        .attr('x', titlePadding)\n        .attr('y', 55)\n        .html(getText(subTitle, TotalDateSlice));\n\n      if (showGroups) {\n        const legendsWrapper = svg.append('g');\n        const legends = legendsWrapper\n          .selectAll('.legend-wrapper')\n          .data(groups)\n          .enter()\n          .append('g')\n          .attr('class', 'legend-wrapper')\n          .style('cursor', 'pointer')\n          .style('opacity', (d: string) =>\n            store.getState().data.groupFilter.includes(d) ? 0.3 : 1,\n          )\n          .on('click', legendClick);\n\n        legends\n          .append('rect')\n          .attr('class', 'legend-color')\n          .attr('width', 10)\n          .attr('height', 10)\n          .attr('y', 75)\n          .style('fill', (d: string) => getColor({ group: d } as Data));\n\n        legends\n          .append('text')\n          .attr('class', 'legend-text')\n          .attr('x', 20)\n          .attr('y', 75 + 10)\n          .html((d: string) => d);\n\n        let legendX = margin.left;\n        let legendY = 0;\n        legends.each(function () {\n          const wrapper = d3.select(this);\n          const text = wrapper.select('text') as any;\n          const bbox = text.node().getBBox();\n          if (legendX + bbox.width > width) {\n            legendX = margin.left;\n            legendY += 30;\n          }\n          wrapper.attr('transform', 'translate(' + legendX + ', ' + legendY + ')');\n          legendX += bbox.width + 40;\n        });\n\n        margin.top += legendY;\n      }\n\n      maxValue = fixedScale\n        ? data.map((d) => d.value).reduce((max, val) => (max > val ? max : val), 0)\n        : (d3.max(dateSlice, (d: Data) => d.value) as number);\n\n      x = d3\n        .scaleLinear()\n        .domain([0, maxValue])\n        .range([margin.left, width - margin.right - 65]);\n\n      y = d3\n        .scaleLinear()\n        .domain([topN, 0])\n        .range([height - margin.bottom, margin.top]);\n\n      barPadding = (height - (margin.bottom + margin.top)) / (topN * 5);\n      labelPadding = 8;\n      barWidth = (d: Data) => Math.abs(x(d.value) - x(0) - 1);\n      barHeight = y(1) - y(0) - barPadding;\n      barHalfHeight = (y(1) - y(0)) / 2 + 1;\n      barY = (d: Data) => y(d.rank as number) + 5;\n      iconSize = showIcons ? barHeight * 0.9 : 0;\n      iconSpace = showIcons ? iconSize + labelPadding : 0;\n      labelX = labelsOnBars\n        ? (d: Data) => x(d.value) - labelPadding - iconSpace\n        : margin.left - labelPadding;\n\n      xAxis = d3\n        .axisTop(x)\n        .ticks(width > 500 ? 5 : 2)\n        .tickSize(-(height - (margin.top + margin.bottom)))\n        .tickFormat((n: number | { valueOf(): number }) => d3.format(',')(n));\n\n      svg\n        .append('g')\n        .attr('class', 'axis xAxis')\n        .attr('transform', `translate(0, ${margin.top})`)\n        .call(xAxis)\n        .selectAll('.tick line')\n        .classed('origin', (d: number) => d === 0);\n\n      svg\n        .selectAll('rect.bar')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('rect')\n        .attr('class', (d: Data) => 'bar ' + safeName(d.name))\n        .classed('selected', (d: Data) => store.getState().data.selected.includes(d.name))\n        .attr('x', x(0) + 1)\n        .attr('width', barWidth)\n        .attr('y', barY)\n        .attr('height', barHeight)\n        .style('fill', (d: Data) => getColor(d))\n        .on('click', selectFn)\n        .on('mouseover', highlightFn)\n        .on('mouseout', highlightFn);\n\n      svg\n        .selectAll('text.label')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', labelX)\n        .attr('y', (d: Data) => barY(d) + barHalfHeight)\n        .style('text-anchor', 'end')\n        .html((d: Data) => d.name)\n        .on('click', selectFn)\n        .on('mouseover', highlightFn)\n        .on('mouseout', highlightFn);\n\n      svg\n        .selectAll('text.valueLabel')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('text')\n        .attr('class', 'valueLabel')\n        .attr('x', (d: Data) => x(d.value) + 5)\n        .attr('y', (d: Data) => barY(d) + barHalfHeight)\n        .text((d: Data) => d3.format(',.0f')(d.lastValue as number));\n\n      if (showIcons) {\n        defs = svg.append('svg:defs');\n\n        defs\n          .selectAll('svg')\n          .data(dateSlice, (d: Data) => d.name)\n          .enter()\n          .append('svg:pattern')\n          .attr('class', 'svgpattern')\n          .attr('id', getIconID)\n          .attr('width', iconSize)\n          .attr('height', iconSize)\n          .append('svg:image')\n          .attr('xlink:href', (d: Data) => d.icon)\n          .attr('width', iconSize)\n          .attr('height', iconSize)\n          .attr('x', 0)\n          .attr('y', 0);\n\n        svg\n          .selectAll('circle')\n          .data(dateSlice, (d: Data) => d.name)\n          .enter()\n          .append('circle')\n          .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n          .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight)\n          .attr('r', iconSize / 2)\n          .style('fill', 'transparent')\n          .style('fill', (d: Data) => `url(#${getIconID(d)})`);\n      }\n\n      dateCounterText = svg\n        .append('text')\n        .attr('class', 'dateCounterText')\n        .attr('x', width - margin.right - barPadding)\n        .attr('y', height - 40)\n        .style('text-anchor', 'end')\n        .html(getText(dateCounter, TotalDateSlice, true))\n        .call(halo);\n\n      captionText = svg\n        .append('text')\n        .attr('class', 'caption')\n        .attr('x', width - margin.right - barPadding - 10)\n        .attr('y', height - margin.bottom - barPadding)\n        .style('text-anchor', 'end')\n        .html(getText(caption, TotalDateSlice));\n    }\n\n    function renderControls() {\n      const controlIcons = [\n        { skipBack: icons.skipBack },\n        { play: icons.play },\n        { pause: icons.pause },\n        { skipForward: icons.skipForward },\n      ];\n\n      const elementWidth = element.getBoundingClientRect().width;\n\n      d3.select(selector)\n        .append('div')\n        .classed('controls', true)\n        .style('width', width)\n        .style('right', elementWidth - width + margin.right + barPadding + 'px')\n        .selectAll('div')\n        .data(controlIcons)\n        .enter()\n        .append('div')\n        .html((d) => Object.values(d)[0] as string)\n        .attr('class', (d) => Object.keys(d)[0]);\n\n      if (store.getState().options.showControls === 'play') {\n        hideElement(elements.skipBack);\n        hideElement(elements.skipForward);\n      }\n      if (store.getState().options.showControls === 'none') {\n        hideElement(elements.controls);\n      }\n    }\n\n    function renderOverlays() {\n      const overlayIcons = [\n        { overlayPlay: icons.overlayPlay },\n        { overlayRepeat: icons.overlayRepeat },\n      ];\n\n      d3.select(selector)\n        .append('div')\n        .classed('overlay', true)\n        .style('minHeight', minHeight + 'px')\n        .style('minWidth', minWidth + 'px')\n        .selectAll('div')\n        .data(overlayIcons)\n        .enter()\n        .append('div')\n        .html((d) => Object.values(d)[0] as string)\n        .attr('class', (d) => Object.keys(d)[0]);\n    }\n  }\n\n  function renderFrame() {\n    if (!x) {\n      return;\n    }\n\n    const {\n      tickDuration,\n      topN,\n      title,\n      subTitle,\n      caption,\n      dateCounter,\n      fixedScale,\n    } = store.getState().options;\n    const CompleteDateSlice = getDateSlice(data, store.getState().ticker.currentDate);\n    const dateSlice = CompleteDateSlice.slice(0, store.getState().options.topN);\n\n    if (showGroups) {\n      svg\n        .selectAll('.legend-wrapper')\n        .style('opacity', (d: string) => (store.getState().data.groupFilter.includes(d) ? 0.3 : 1));\n    }\n\n    if (!fixedScale) {\n      x.domain([0, d3.max(dateSlice, (d: Data) => d.value) as number]);\n\n      svg //\n        .select('.xAxis')\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .call(xAxis);\n    }\n\n    const bars = svg //\n      .selectAll('.bar')\n      .data(dateSlice, (d: Data) => d.name);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', (d: Data) => 'bar ' + safeName(d.name))\n      .classed('selected', (d: Data) => store.getState().data.selected.includes(d.name))\n      .attr('x', x(0) + 1)\n      .attr('width', barWidth)\n      .attr('y', () => y(topN + 1) + 5)\n      .attr('height', barHeight)\n      .style('fill', (d: Data) => getColor(d))\n      .on('click', selectFn)\n      .on('mouseover', highlightFn)\n      .on('mouseout', highlightFn)\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', barY);\n\n    bars\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n      .attr('y', barY);\n\n    bars\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    const labels = svg //\n      .selectAll('.label')\n      .data(dateSlice, (d: Data) => d.name);\n\n    labels\n      .enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', labelX)\n      .attr('y', () => y(topN + 1) + 5 + barHalfHeight)\n      .style('text-anchor', 'end')\n      .html((d: Data) => d.name)\n      .on('click', selectFn)\n      .on('mouseover', highlightFn)\n      .on('mouseout', highlightFn)\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    labels\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', labelX)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    labels\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', labelX)\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    const valueLabels = svg //\n      .selectAll('.valueLabel')\n      .data(dateSlice, (d: Data) => d.name);\n\n    valueLabels\n      .enter()\n      .append('text')\n      .attr('class', 'valueLabel')\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', () => y(topN + 1) + 5)\n      .text((d: Data) => d3.format(',.0f')(d.lastValue as number))\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    valueLabels\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight)\n      .tween('text', function (d: Data) {\n        const i = d3.interpolateRound(d.lastValue as number, d.value);\n        return function (t: number) {\n          this.textContent = d3.format(',')(i(t));\n        };\n      });\n\n    valueLabels\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    if (store.getState().options.showIcons) {\n      const iconPatterns = defs.selectAll('.svgpattern').data(dateSlice, (d: Data) => d.name);\n\n      iconPatterns\n        .enter()\n        .append('svg:pattern')\n        .attr('class', 'svgpattern')\n        .attr('id', getIconID)\n        .attr('width', iconSize)\n        .attr('height', iconSize)\n        .append('svg:image')\n        .attr('xlink:href', (d: Data) => d.icon)\n        .attr('width', iconSize)\n        .attr('height', iconSize)\n        .style('z-index', '99')\n        .attr('x', 0)\n        .attr('y', 0);\n\n      iconPatterns.exit().remove();\n\n      const icons = svg //\n        .selectAll('circle')\n        .data(dateSlice, (d: Data) => d.name);\n\n      icons\n        .enter()\n        .append('circle')\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', () => y(topN + 1) + iconSize + barHalfHeight)\n        .attr('r', iconSize / 2)\n        .style('z-index', '99')\n        .style('fill', 'transparent')\n        .style('fill', (d: Data) => `url(#${getIconID(d)})`)\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight);\n\n      icons\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight);\n\n      icons\n        .exit()\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', () => y(topN + 1) + iconSize + barHalfHeight)\n        .remove();\n    }\n\n    titleText.html(getText(title, CompleteDateSlice));\n    subTitleText.html(getText(subTitle, CompleteDateSlice));\n    captionText.html(getText(caption, CompleteDateSlice));\n    dateCounterText.html(getText(dateCounter, CompleteDateSlice, true)).call(halo);\n    updateControls();\n  }\n\n  function resize() {\n    if (\n      (!store.getState().options.inputHeight && !store.getState().options.inputWidth) ||\n      String(store.getState().options.inputHeight).startsWith('window') ||\n      String(store.getState().options.inputWidth).startsWith('window')\n    ) {\n      const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n\n      height = getHeight(\n        element,\n        store.getState().options.minHeight,\n        store.getState().options.inputHeight,\n      );\n      width = getWidth(\n        element,\n        store.getState().options.minWidth,\n        store.getState().options.inputWidth,\n      );\n\n      const currentPosition = element.style.position; // \"fixed\" if scrolling\n      renderInitalView();\n      renderFrame();\n      updateControls();\n      element.style.position = currentPosition;\n    }\n  }\n\n  function updateControls() {\n    const showOverlays = store.getState().options.showOverlays;\n\n    if (store.getState().ticker.isRunning) {\n      showElement(elements.pause);\n      hideElement(elements.play);\n    } else {\n      showElement(elements.play);\n      hideElement(elements.pause);\n    }\n\n    if (\n      store.getState().ticker.isFirstDate &&\n      (showOverlays === 'all' || showOverlays === 'play') &&\n      !store.getState().ticker.isRunning\n    ) {\n      getElement(elements.controls).style.visibility = 'hidden';\n      showElement(elements.overlay);\n      showElement(elements.overlayPlay);\n      hideElement(elements.overlayRepeat);\n    } else if (\n      store.getState().ticker.isLastDate &&\n      (showOverlays === 'all' || showOverlays === 'repeat') &&\n      !(store.getState().options.loop && store.getState().ticker.isRunning)\n    ) {\n      getElement(elements.controls).style.visibility = 'hidden';\n      showElement(elements.overlay);\n      showElement(elements.overlayRepeat);\n      hideElement(elements.overlayPlay);\n    } else {\n      getElement(elements.controls).style.visibility = 'unset';\n      getElement(elements.overlay).style.display = 'none';\n    }\n  }\n\n  function halo(text: any) {\n    svg //\n      .selectAll('.halo')\n      .remove();\n\n    text\n      .select(function () {\n        return this.parentNode.insertBefore(this.cloneNode(true), this);\n      })\n      .classed('halo', true);\n  }\n\n  function legendClick(d: string) {\n    getClicks(d3.event, function (event: any) {\n      const clicks = event.detail;\n      if (clicks === 3) {\n        store.dispatch(actions.data.resetFilters());\n      } else if (clicks === 2) {\n        store.dispatch(actions.data.allExceptFilter(d));\n      } else {\n        store.dispatch(actions.data.toggleFilter(d));\n      }\n    });\n  }\n\n  function highlightFn(d: any) {\n    if (highlightBars) {\n      toggleClass('rect.' + safeName(d.name), 'highlight');\n    }\n  }\n\n  function selectFn(d: Data) {\n    if (selectBars) {\n      toggleClass('rect.' + safeName(d.name), 'selected');\n      store.dispatch(actions.data.toggleSelection(d.name));\n    }\n  }\n\n  return {\n    renderInitalView,\n    renderFrame,\n    resize,\n  };\n}\n","// This file is auto-generated and will be over-written!\n// Please do NOT edit this file directly\n// You may edit files in this folder instead: src\\lib\\css\n\nexport const styles = `\n__selector__ text {\n  font-size: 16px;\n  font-family: Open Sans, sans-serif;\n}\n\n__selector__ text.title {\n  font-size: 24px;\n  font-weight: 500;\n}\n\n__selector__ text.subTitle {\n  font-weight: 500;\n}\n\n__selector__ text.caption {\n  font-weight: 400;\n  font-size: 24px;\n}\n__selector__ text.legend-text {\n  user-select: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n}\n__selector__ text.label {\n  font-weight: 600;\n}\n\n__selector__ text.valueLabel {\n  font-weight: 300;\n}\n\n__selector__ text.dateCounterText {\n  font-size: 64px;\n  font-weight: 700;\n}\n\n__selector__ .xAxis .tick:nth-child(2) text {\n  text-anchor: start;\n}\n\n__selector__ .tick line {\n  shape-rendering: CrispEdges;\n}\n\n__selector__ path.domain {\n  display: none;\n}\n\n__selector__ {\n  position: relative;\n}\n\n__selector__ .controls {\n  /*  width and right are set dynamically in renderer.ts */\n  position: absolute;\n  top: 0;\n  display: flex;\n}\n\n__selector__ .controls div,\n__selector__ .overlay div {\n  cursor: pointer;\n  font-size: 24px;\n  font-weight: 700;\n  width: 38px;\n  height: 38px;\n  -moz-border-radius: 5px;\n  -webkit-border-radius: 5px;\n  border-radius: 5px;\n  margin: 5px;\n  text-align: center;\n}\n\n__selector__ .controls svg {\n  margin: 5px auto;\n  width: 28px;\n  height: 28px;\n}\n\n__selector__ .overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n__selector__ .overlay div {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 200px;\n  height: 200px;\n  -moz-border-radius: 100px;\n  -webkit-border-radius: 100px;\n  border-radius: 100px;\n}\n__selector__ .overlay svg {\n  height: 50%;\n  width: 50%;\n}\n`;\n\nexport const themes = {\n\"dark\": `\n__selector__ {\n  background-color: #313639;\n}\n\n__selector__ text.title {\n  fill: #fafafa;\n}\n\n__selector__ text.subTitle {\n  fill: #cccccc;\n}\n\n__selector__ text.dateCounterText {\n  fill: #cccccc;\n  opacity: 1;\n}\n\n__selector__ text.caption {\n  fill: #cccccc;\n}\n\n__selector__ .halo {\n  fill: #313639;\n  stroke: #313639;\n  stroke-width: 10;\n  stroke-linejoin: round;\n  opacity: 1;\n}\n\n__selector__ text.legend-text {\n  fill: #fafafa;\n}\n\n__selector__ text.label {\n  fill: #313639;\n}\n\n__selector__ text.valueLabel {\n  fill: #fafafa;\n}\n\n__selector__ .tick text {\n  fill: #cccccc;\n}\n\n__selector__ .tick line {\n  shape-rendering: CrispEdges;\n  stroke: #dddddd;\n}\n\n__selector__ .tick line.origin {\n  stroke: #aaaaaa;\n}\n\n__selector__ .controls div,\n__selector__ .overlay div {\n  color: #ffffff;\n  background: #777777;\n  border: 1px solid black;\n  opacity: 0.5;\n}\n\n__selector__ .controls div:hover,\n__selector__ .overlay div:hover {\n  background: #aaaaaa;\n  color: black;\n}\n\n__selector__ .overlay {\n  background-color: black;\n  opacity: 0.7;\n}\n\n__selector__ .highlight {\n  fill: rgb(255, 39, 39) !important;\n}\n\n__selector__ .selected {\n  fill: rgb(209, 32, 32) !important;\n  stroke: #777777 !important;\n  stroke-width: 1 !important;\n}\n`,\n\"light\": `\n/* __selector__ {\n  background-color: #ffffff;\n}\n\n__selector__ text.title {\n  fill: #fafafa;\n} */\n\n__selector__ text.subTitle {\n  fill: #777777;\n}\n\n__selector__ text.dateCounterText {\n  fill: #bbbbbb;\n  opacity: 1;\n}\n\n__selector__ text.caption {\n  fill: #777777;\n}\n\n__selector__ .halo {\n  fill: #ffffff;\n  stroke: #ffffff;\n  stroke-width: 10;\n  stroke-linejoin: round;\n  opacity: 1;\n}\n\n__selector__ text.legend-text {\n  fill: #000000;\n}\n\n__selector__ text.label {\n  fill: #000000;\n}\n\n__selector__ text.valueLabel {\n  fill: #000000;\n}\n\n__selector__ .tick text {\n  fill: #777777;\n}\n\n__selector__ .tick line {\n  shape-rendering: CrispEdges;\n  stroke: #dddddd;\n}\n\n__selector__ .tick line.origin {\n  stroke: #aaaaaa;\n}\n\n__selector__ .controls div,\n__selector__ .overlay div {\n  color: #ffffff;\n  background: #777777;\n  border: 1px solid black;\n  opacity: 0.5;\n}\n\n__selector__ .controls div:hover,\n__selector__ .overlay div:hover {\n  background: #aaaaaa;\n  color: black;\n}\n\n__selector__ .overlay {\n  background-color: black;\n  opacity: 0.7;\n}\n\n__selector__ .highlight {\n  fill: rgb(255, 39, 39) !important;\n}\n\n__selector__ .selected {\n  fill: rgb(209, 37, 37) !important;\n  stroke: #777777 !important;\n  stroke-width: 1 !important;\n}\n`,\n};\n","import { store } from '../store';\nimport { styles, themes } from './generated-styles';\n\n// modifed from https://github.com/egoist/style-inject\nexport function styleInject(selector: string, insertAt = 'top') {\n  let css = styles + (themes as any)[store.getState().options.theme];\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  // replace with selector\n  css = css.split('__selector__').join(selector);\n\n  const head = document.head || document.getElementsByTagName('head')[0];\n  const style = document.createElement('style') as HTMLStyleElement | any;\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n","import { elements } from './elements';\nimport { store } from './store';\nimport { Ticker } from './ticker';\nimport { addEventHandler, hideElement } from './utils';\nimport { formatDate } from './dates';\nimport { DOMCustomEvent } from './models';\n\nexport function registerEvents(element: HTMLElement, ticker: Ticker) {\n  registerControlButtonEvents();\n  registerOverlayEvents();\n  registerClickEvents();\n  registerKeyboardEvents();\n\n  function registerControlButtonEvents() {\n    addEventHandler(elements.skipBack, 'click', ticker.skipBack);\n    addEventHandler(elements.play, 'click', ticker.toggle);\n    addEventHandler(elements.pause, 'click', ticker.toggle);\n    addEventHandler(elements.skipForward, 'click', ticker.skipForward);\n  }\n\n  function registerOverlayEvents() {\n    addEventHandler(elements.overlayPlay, 'click', () => {\n      hideElement(elements.overlay);\n      ticker.start();\n    });\n    addEventHandler(elements.overlayRepeat, 'click', () => {\n      hideElement(elements.overlay);\n      ticker.loop();\n      ticker.start();\n    });\n  }\n\n  function registerClickEvents() {\n    if (!store.getState().options.disableClickEvents) {\n      const svg = element.querySelector('svg') as SVGSVGElement;\n      svg.addEventListener('click', ticker.toggle);\n      element.addEventListener('dblclick', ticker.skipForward);\n    }\n  }\n\n  function registerKeyboardEvents() {\n    if (!store.getState().options.disableKeyboardEvents) {\n      document.addEventListener('keypress', function (e) {\n        const keyCodes = {\n          spacebar: 32,\n          a: 97,\n          d: 100,\n          s: 115,\n        };\n\n        // TODO: keyCode is deprecated\n        switch (e.keyCode) {\n          case keyCodes.spacebar:\n            ticker.toggle();\n            break;\n          case keyCodes.a:\n            ticker.skipBack();\n            break;\n          case keyCodes.s:\n            ticker.toggle();\n            break;\n          case keyCodes.d:\n            ticker.skipForward();\n            break;\n        }\n      });\n    }\n  }\n}\n\nfunction dispatchDOMEvent(element: HTMLElement, currentDate: string) {\n  element.dispatchEvent(\n    new CustomEvent('racingBars/dateChanged', {\n      bubbles: true,\n      detail: {\n        date: formatDate(currentDate),\n        isFirst: store.getState().ticker.isFirstDate,\n        isLast: store.getState().ticker.isLastDate,\n      },\n    } as DOMCustomEvent),\n  );\n}\n\nexport function DOMEventSubscriber(element: HTMLElement) {\n  let lastDate = '';\n  return function () {\n    const currentDate = store.getState().ticker.currentDate;\n    if (currentDate !== lastDate) {\n      dispatchDOMEvent(element, currentDate);\n      lastDate = currentDate;\n    }\n  };\n}\n","import { store, actions } from './store';\r\n\r\nexport function createScroller(element: HTMLElement) {\r\n  const dates = store.getState().ticker.dates;\r\n  prepareDOM();\r\n\r\n  const step = document.body.clientHeight / dates.length;\r\n\r\n  subscribeToEvents();\r\n\r\n  function prepareDOM() {\r\n    element.style.position = 'fixed';\r\n    element.style.top = '0';\r\n\r\n    const scrollElement = document.createElement('div');\r\n    scrollElement.style.height = window.innerHeight * 10 + 'px';\r\n    document.body.appendChild(scrollElement);\r\n  }\r\n\r\n  function subscribeToEvents() {\r\n    window.addEventListener('scroll', goToDate);\r\n    // element.addEventListener(\"dateChanged\", scrollToPosition);\r\n  }\r\n\r\n  // function scrollToPosition(e: CustomEvent) {\r\n  //   let currentDate = getDateString(e.detail.date);\r\n  //   let index = dates.indexOf(currentDate);\r\n  //   ignoreNextScrollEvent = true;\r\n  //   window.scroll({\r\n  //     top: index * step,\r\n  //     behavior: \"smooth\",\r\n  //   });\r\n  // }\r\n\r\n  function goToDate() {\r\n    const index = Math.ceil(window.pageYOffset / step);\r\n    if (index < dates.length) {\r\n      store.dispatch(actions.ticker.updateDate(dates[index]));\r\n    } else {\r\n      store.dispatch(actions.ticker.setLast());\r\n    }\r\n  }\r\n}\r\n","import { prepareData } from './data-utils';\nimport { getDateString } from './dates';\nimport { Data, WideData } from './data';\nimport { createRenderer } from './renderer';\nimport { createTicker } from './ticker';\nimport { styleInject } from './styles';\nimport { actions, store } from './store';\nimport { Options, RequiredOptions } from './options';\nimport { registerEvents, DOMEventSubscriber } from './events';\nimport { createScroller } from './scroller';\n\nexport function race(data: Data[] | WideData[], options: Options | RequiredOptions) {\n  store.dispatch(actions.options.optionsLoaded(options));\n\n  const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n  if (!element) {\n    throw new Error('Cannot find element with this selector: ' + store.getState().options.selector);\n  }\n\n  if (store.getState().options.injectStyles) {\n    styleInject(store.getState().options.selector, 'top');\n  }\n\n  const preparedData = prepareData(data as Data[]);\n\n  const ticker = createTicker();\n\n  const renderer = createRenderer(preparedData);\n  renderer.renderInitalView();\n\n  store.subscribe(renderer.renderFrame);\n  store.subscribe(DOMEventSubscriber(element));\n\n  ticker.start();\n\n  if (!store.getState().options.autorun) {\n    ticker.stop();\n  }\n\n  registerEvents(element, ticker);\n  window.addEventListener('resize', resize);\n\n  function resize() {\n    renderer.resize();\n    registerEvents(element, ticker);\n  }\n\n  return {\n    // TODO: validate user input\n    start: () => {\n      if (!store.getState().ticker.isRunning) {\n        ticker.start();\n      }\n    },\n    stop: () => {\n      ticker.stop();\n    },\n    rewind: () => {\n      ticker.skipBack();\n    },\n    fastforward: () => {\n      ticker.skipForward();\n    },\n    loop: () => {\n      ticker.loop();\n    },\n    inc: (value = 1) => {\n      store.dispatch(actions.ticker.inc(value));\n    },\n    dec: (value = 1) => {\n      store.dispatch(actions.ticker.dec(value));\n    },\n    getDate: () => store.getState().ticker.currentDate,\n    setDate: (inputDate: string | Date) => {\n      store.dispatch(actions.ticker.updateDate(getDateString(inputDate)));\n    },\n    getAllDates: () => [...store.getState().data.formattedDates],\n    createScroller: () => {\n      createScroller(element);\n    },\n  };\n}\n"],"names":["loadData","URL","type","d3","Error","actionTypes","dataLoaded","addFilter","removeFilter","toggleFilter","resetFilters","allExceptFilter","addSelection","removeSelection","toggleSelection","resetSelections","dataCollections","payload","group","selection","initialState","names","groups","dates","formattedDates","groupFilter","selected","dataReducer","state","action","collections","addToArray","removeFromArray","toggleItem","array","item","arr","includes","push","filter","x","optionsLoaded","changeOptions","optionsChanged","options","selector","dataShape","fillDateGaps","fillDateGapsValue","startDate","endDate","colorSeed","showGroups","tickDuration","topN","disableClickEvents","disableKeyboardEvents","autorun","loop","injectStyles","title","subTitle","caption","dateCounter","labelsOnBars","labelsWidth","showIcons","showControls","showOverlays","inputHeight","inputWidth","minHeight","minWidth","height","width","theme","colorMap","fixedScale","highlightBars","selectBars","optionsReducer","getDateString","initialize","updateDate","setRunning","setFirst","setLast","inc","dec","currentDate","running","value","isRunning","isFirstDate","isLastDate","tickerReducer","indexOf","length","currentIndex","lastIndex","incValue","newDate","decValue","createTicker","store","dispatch","actions","ticker","getState","data","start","showRace","_","stop","skipBack","skipForward","toggle","goToDate","date","rootReducer","createStore","reducer","preloadedState","notifySubscribers","subscribers","subscribe","fn","index","unsubscribe","splice","forEach","getColor","d","color","useGroup","Boolean","values","shuffle","toNumber","currentValue","name","Array","isArray","negativeIfOdd","lumVariation","random","HueSpacing","hue","getIconID","toLowerCase","split","join","zeroPad","n","w","toString","s","String","nums","i","charCodeAt","InputSeed","seed","Math","sin","floor","randomString","prefix","rnd","fill","map","substr","slice","m","t","generateId","getHeight","element","newHeight","getBoundingClientRect","startsWith","scale","window","innerHeight","getWidth","newWidth","innerWidth","getElement","className","document","querySelector","showElement","style","display","hideElement","addEventHandler","event","handler","addEventListener","getText","param","dateSlice","isDate","formatDate","safeName","replace","toggleClass","classed","debounce","func","wait","immediate","timeout","_clicks","_Fn","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getClicks","Fn","getDates","from","Set","sort","inputDate","Date","isNaN","year","getFullYear","month","getMonth","day","getDate","dateStr","format","weekDayIndex","getDay","monthNames","weekDays","prepareData","rawData","wideDataToLong","fillGaps","calculateLastValues","loadDataCollectionsToState","a","b","localeCompare","reduce","acc","curr","lastValue","last","wide","long","Object","entries","key","Number","period","minDate","maxDate","next","years","dt","setFullYear","months","setMonth","days","setDate","dateRange","missing","getDateSlice","rank","emptyData","icons","play","pause","overlayPlay","overlayRepeat","elements","controls","overlay","createRenderer","margin","svg","y","xAxis","titlePadding","barPadding","labelPadding","barWidth","barHeight","barHalfHeight","defs","iconSize","iconSpace","titleText","subTitleText","captionText","dateCounterText","labelX","barY","maxValue","renderInitalView","TotalDateSlice","innerHTML","renderInitialFrame","renderControls","renderOverlays","updateControls","labelsArea","groupsArea","top","right","bottom","left","append","attr","html","legendsWrapper","legends","selectAll","enter","on","legendClick","legendX","legendY","each","wrapper","text","select","bbox","node","getBBox","max","val","domain","range","abs","ticks","tickSize","tickFormat","call","selectFn","highlightFn","icon","halo","controlIcons","elementWidth","keys","overlayIcons","renderFrame","CompleteDateSlice","transition","duration","ease","bars","exit","remove","labels","valueLabels","tween","textContent","iconPatterns","resize","currentPosition","position","visibility","parentNode","insertBefore","cloneNode","clicks","detail","styles","themes","styleInject","insertAt","css","head","getElementsByTagName","createElement","firstChild","appendChild","styleSheet","cssText","createTextNode","registerEvents","registerControlButtonEvents","registerOverlayEvents","registerClickEvents","registerKeyboardEvents","e","keyCodes","spacebar","keyCode","dispatchDOMEvent","dispatchEvent","CustomEvent","bubbles","isFirst","isLast","DOMEventSubscriber","lastDate","createScroller","prepareDOM","step","body","clientHeight","subscribeToEvents","scrollElement","ceil","pageYOffset","race","preparedData","renderer","rewind","fastforward","getAllDates"],"mappings":"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"}