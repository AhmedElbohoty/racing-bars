{"version":3,"file":"racing-bars.umd.js","sources":["../../src/lib/options/options.actions.ts","../../src/lib/options/options.reducer.ts","../../src/lib/ticker/ticker.actions.ts","../../src/lib/ticker/ticker.reducer.ts","../../src/lib/ticker/ticker.ts","../../src/lib/store/actions.ts","../../src/lib/store/reducer.ts","../../src/lib/store/state.ts","../../src/lib/store/store.ts","../../src/lib/utils.ts","../../src/lib/dates.ts","../../src/lib/data-utils.ts","../../src/lib/events.ts","../../src/lib/elements.ts","../../src/lib/load-data.ts","../../src/lib/race.ts","../../src/lib/styles/style-inject.ts","../../src/lib/renderer.ts","../../src/lib/scroller.ts"],"sourcesContent":["import { Options, OptionsAction } from './options.models';\r\n\r\nexport const actionTypes = {\r\n  optionsLoaded: 'options/loaded',\r\n  changeOptions: 'options/change',\r\n  optionsChanged: 'options/changed',\r\n};\r\n\r\nexport const optionsLoaded = (options: Options): OptionsAction => ({\r\n  type: actionTypes.optionsLoaded,\r\n  payload: options,\r\n});\r\n\r\nexport const changeOptions = (options: Options): OptionsAction => ({\r\n  type: actionTypes.changeOptions,\r\n  payload: options,\r\n});\r\n\r\nexport const optionsChanged = (options: Options): OptionsAction => ({\r\n  type: actionTypes.optionsChanged,\r\n  payload: options,\r\n});\r\n","import { getDateString } from '../dates';\nimport { Options, OptionsAction } from './options.models';\nimport { actionTypes } from './options.actions';\n\nconst initialState: Options = {\n  selector: '#race',\n  dataShape: 'long',\n  fillDateGaps: false,\n  fillDateGapsValue: 'last',\n  startDate: '',\n  endDate: '',\n  colorSeed: '',\n  showGroups: true,\n  tickDuration: 500,\n  topN: 10,\n  disableClickEvents: true,\n  disableKeyboardEvents: false,\n  autorun: true,\n  loop: false,\n  injectStyles: true,\n  title: '18 years of Top Global Brands',\n  subTitle: 'Brand value, $m',\n  caption: 'Source: Interbrand',\n  dateCounter: 'MM/YYYY',\n  labelsOnBars: true,\n  labelsWidth: 100,\n  showIcons: false,\n  showControls: 'all',\n  showOverlays: 'all',\n  inputHeight: '',\n  inputWidth: '',\n  minHeight: 300,\n  minWidth: 500,\n  height: '',\n  width: '',\n};\n\nexport function optionsReducer(state = initialState, action: OptionsAction): Options {\n  switch (action.type) {\n    case actionTypes.optionsLoaded:\n      const startDate = action.payload.startDate ? getDateString(action.payload.startDate) : '';\n      const endDate = action.payload.endDate ? getDateString(action.payload.endDate) : '';\n      const inputHeight = action.payload.height;\n      const inputWidth = action.payload.width;\n      return {\n        ...state,\n        ...action.payload,\n        startDate,\n        endDate,\n        inputHeight,\n        inputWidth,\n      };\n\n    case actionTypes.changeOptions:\n      return {\n        ...state,\n        ...action.payload,\n      };\n\n    default:\n      return state;\n  }\n}\n","import { TickerAction } from './ticker.models';\r\n\r\nexport const actionTypes = {\r\n  initialize: 'ticker/initialize',\r\n  updateDate: 'ticker/updateDate',\r\n  setRunning: 'ticker/setRunning',\r\n  setFirst: 'ticker/setFirst',\r\n  setLast: 'ticker/setLast',\r\n  inc: 'ticker/inc',\r\n  dec: 'ticker/dec',\r\n};\r\n\r\nexport const initialize = (dates: string[]): TickerAction => ({\r\n  type: actionTypes.initialize,\r\n  payload: dates,\r\n});\r\n\r\nexport const updateDate = (currentDate: string): TickerAction => ({\r\n  type: actionTypes.updateDate,\r\n  payload: currentDate,\r\n});\r\n\r\nexport const setRunning = (running: boolean): TickerAction => ({\r\n  type: actionTypes.setRunning,\r\n  payload: running,\r\n});\r\n\r\nexport const setFirst = (): TickerAction => ({\r\n  type: actionTypes.setFirst,\r\n});\r\n\r\nexport const setLast = (): TickerAction => ({\r\n  type: actionTypes.setLast,\r\n});\r\n\r\nexport const inc = (value = 1): TickerAction => ({\r\n  type: actionTypes.inc,\r\n  payload: value,\r\n});\r\n\r\nexport const dec = (value = 1): TickerAction => ({\r\n  type: actionTypes.dec,\r\n  payload: value,\r\n});\r\n","import { TickerState, TickerAction } from './ticker.models';\r\nimport { actionTypes } from './ticker.actions';\r\n\r\nconst initialState: TickerState = {\r\n  isRunning: false,\r\n  currentDate: '',\r\n  isFirstDate: true,\r\n  isLastDate: false,\r\n  dates: [],\r\n};\r\n\r\nexport function tickerReducer(state = initialState, action: TickerAction): TickerState {\r\n  switch (action.type) {\r\n    case actionTypes.initialize: {\r\n      const dates = action.payload as string[];\r\n      return {\r\n        ...state,\r\n        isRunning: false,\r\n        currentDate: dates[0],\r\n        isFirstDate: true,\r\n        isLastDate: false,\r\n        dates,\r\n      };\r\n    }\r\n\r\n    case actionTypes.updateDate: {\r\n      const currentDate = action.payload as string;\r\n      if (state.dates.indexOf(currentDate) === -1) {\r\n        return { ...state };\r\n      }\r\n      return {\r\n        ...state,\r\n        currentDate,\r\n        isFirstDate: currentDate === state.dates[0],\r\n        isLastDate: currentDate === state.dates[state.dates.length - 1],\r\n      };\r\n    }\r\n\r\n    case actionTypes.setRunning: {\r\n      return {\r\n        ...state,\r\n        isRunning: action.payload as boolean,\r\n      };\r\n    }\r\n\r\n    case actionTypes.setFirst: {\r\n      return {\r\n        ...state,\r\n        currentDate: state.dates[0],\r\n        isFirstDate: true,\r\n        isLastDate: false,\r\n      };\r\n    }\r\n\r\n    case actionTypes.setLast: {\r\n      return {\r\n        ...state,\r\n        currentDate: state.dates[state.dates.length - 1],\r\n        isFirstDate: false,\r\n        isLastDate: true,\r\n      };\r\n    }\r\n\r\n    case actionTypes.inc: {\r\n      const currentIndex = state.dates.indexOf(state.currentDate);\r\n      const lastIndex = state.dates.length - 1;\r\n      const incValue = action.payload as number;\r\n      const newDate =\r\n        currentIndex + incValue > lastIndex\r\n          ? state.dates[lastIndex]\r\n          : state.dates[currentIndex + incValue];\r\n      return {\r\n        ...state,\r\n        currentDate: newDate,\r\n        isFirstDate: newDate === state.dates[0],\r\n        isLastDate: newDate === state.dates[lastIndex],\r\n      };\r\n    }\r\n\r\n    case actionTypes.dec: {\r\n      const currentIndex = state.dates.indexOf(state.currentDate);\r\n      const decValue = action.payload as number;\r\n      const newDate =\r\n        currentIndex - decValue < 0 ? state.dates[0] : state.dates[currentIndex - decValue];\r\n      return {\r\n        ...state,\r\n        currentDate: newDate,\r\n        isFirstDate: newDate === state.dates[0],\r\n        isLastDate: newDate === state.dates[state.dates.length - 1],\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import * as d3 from '../d3';\r\nimport { store, actions } from '../store';\r\nimport { Ticker } from './ticker.models';\r\n\r\nexport function createTicker(dates: string[]): Ticker {\r\n  store.dispatch(actions.ticker.initialize(dates));\r\n\r\n  let ticker: d3.Timer;\r\n\r\n  function start() {\r\n    ticker = d3.interval(showRace, store.getState().options.tickDuration);\r\n    store.dispatch(actions.ticker.setRunning(true));\r\n\r\n    function showRace(_: number) {\r\n      if (store.getState().ticker.isLastDate) {\r\n        if (store.getState().options.loop) {\r\n          loop();\r\n        } else {\r\n          stop();\r\n        }\r\n      } else {\r\n        store.dispatch(actions.ticker.inc());\r\n      }\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    if (ticker) {\r\n      ticker.stop();\r\n    }\r\n    store.dispatch(actions.ticker.setRunning(false));\r\n  }\r\n\r\n  function skipBack() {\r\n    stop();\r\n    store.dispatch(actions.ticker.setFirst());\r\n  }\r\n\r\n  function loop() {\r\n    store.dispatch(actions.ticker.setFirst());\r\n  }\r\n\r\n  function skipForward() {\r\n    stop();\r\n    store.dispatch(actions.ticker.setLast());\r\n  }\r\n\r\n  function toggle() {\r\n    if (store.getState().ticker.isLastDate) {\r\n      skipBack();\r\n      start();\r\n    } else if (store.getState().ticker.isRunning) {\r\n      stop();\r\n    } else {\r\n      if (!store.getState().ticker.isFirstDate) {\r\n        // to avoid lastValue flicker\r\n        store.dispatch(actions.ticker.inc());\r\n      }\r\n      start();\r\n    }\r\n  }\r\n\r\n  function goToDate(date: string) {\r\n    store.dispatch(actions.ticker.updateDate(date));\r\n  }\r\n\r\n  return {\r\n    start,\r\n    stop,\r\n    skipBack,\r\n    loop,\r\n    skipForward,\r\n    toggle,\r\n    goToDate,\r\n  };\r\n}\r\n","import * as options from '../options';\r\nimport * as ticker from '../ticker';\r\n\r\nexport const actions = {\r\n  options,\r\n  ticker,\r\n};\r\n","import { optionsReducer, OptionsAction } from '../options';\r\nimport { tickerReducer, TickerAction } from '../ticker';\r\nimport { Action, State } from './models';\r\n\r\nexport function rootReducer(state: State, action: Action): State {\r\n  return {\r\n    options: optionsReducer(state.options, action as OptionsAction),\r\n    ticker: tickerReducer(state.ticker, action as TickerAction),\r\n  };\r\n}\r\n","import { createStore } from './store';\r\nimport { rootReducer } from './reducer';\r\n\r\nexport const store = createStore(rootReducer);\r\n","import { Action, Reducer, State, Subscriber } from './models';\r\nimport { rootReducer } from './reducer';\r\n\r\nexport function createStore(reducer: Reducer = rootReducer, preloadedState?: State) {\r\n  let state = {} as State;\r\n\r\n  if (preloadedState) {\r\n    state = preloadedState;\r\n  }\r\n\r\n  function dispatch(action: Action) {\r\n    state = reducer(state, action);\r\n    notifySubscribers();\r\n    return action;\r\n  }\r\n\r\n  function getState() {\r\n    return state;\r\n  }\r\n\r\n  const subscribers: Subscriber[] = [];\r\n\r\n  function subscribe(fn: Subscriber) {\r\n    subscribers.push(fn);\r\n    const index = subscribers.length - 1;\r\n\r\n    return {\r\n      unsubscribe: () => {\r\n        subscribers.splice(index, 1);\r\n      },\r\n    };\r\n  }\r\n\r\n  function notifySubscribers() {\r\n    subscribers.forEach((fn: Subscriber) => {\r\n      fn();\r\n    });\r\n  }\r\n\r\n  return {\r\n    getState,\r\n    dispatch,\r\n    subscribe,\r\n  };\r\n}\r\n","import * as d3 from './d3';\n\nimport { Data } from './models';\nimport { store } from './store';\nimport { formatDate } from './dates';\nimport { ParamFunction } from './options';\n\nexport function getColor(d: Data, showGroups: boolean, colorSeed: string) {\n  const nameseed = d.group && showGroups ? d.group : d.name;\n  const seed = nameseed + colorSeed;\n  return d3.hsl(random(seed) * 360, 0.75, 0.75);\n}\n\nexport function getIconID(d: Data) {\n  return 'icon-' + d.name.toLowerCase().split(' ').join('_');\n}\n\nexport function zeroPad(n: string, w: number) {\n  while (n.toString().length < w) {\n    n = '0' + n;\n  }\n  return n;\n}\n\nexport function random(seedStr: string) {\n  function toNumbers(s: string) {\n    let nums = '';\n    for (let i = 0; i < s.length; i++) {\n      nums += zeroPad(String(s.charCodeAt(i)), 3);\n    }\n    return nums;\n  }\n\n  const seed = toNumbers(seedStr);\n  const x = Math.sin(+seed) * 10000;\n  return x - Math.floor(x);\n}\n\nexport function randomString(prefix: string, n: number) {\n  const rnd = Array(3)\n    .fill(null)\n    .map(() => Math.random().toString(36).substr(2))\n    .join('');\n  return prefix + rnd.slice(-n);\n}\n\nexport function generateId(prefix = 'racingbars', n = 8) {\n  return randomString(prefix, n);\n}\n\nexport function getHeight(element: HTMLElement, minHeight: number, height?: string) {\n  let newHeight;\n  if (!height) {\n    newHeight = element.getBoundingClientRect().height;\n  } else if (String(height).startsWith('window')) {\n    const scale = +height.split('*')[1] || 1;\n    newHeight = window.innerHeight * scale;\n  } else {\n    newHeight = +height;\n  }\n  return newHeight > minHeight ? newHeight : minHeight;\n}\n\nexport function getWidth(element: HTMLElement, minWidth: number, width?: string) {\n  let newWidth;\n  if (!width) {\n    newWidth = element.getBoundingClientRect().width;\n  } else if (String(width).startsWith('window')) {\n    const scale = +width.split('*')[1] || 1;\n    newWidth = window.innerWidth * scale;\n  } else {\n    newWidth = +width;\n  }\n  return newWidth > minWidth ? newWidth : minWidth;\n}\n\nexport function getElement(className: string) {\n  const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n  return element.querySelector('.' + className) as HTMLElement;\n}\n\nexport function showElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.style.display = 'flex';\n  }\n}\n\nexport function hideElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.style.display = 'none';\n  }\n}\n\nexport function removeElement(className: string) {\n  const selector = store.getState().options.selector;\n  const element = document.querySelector(selector + ' .' + className) as HTMLElement;\n  if (element) {\n    element.remove();\n  }\n}\n\nexport function addEventHandler(className: string, event: string, handler: () => void) {\n  const element = getElement(className);\n  if (element) {\n    element.addEventListener(event, handler);\n  }\n}\n\nexport function getText(param: string | ParamFunction, dateSlice: Data[], isDate = false): string {\n  if (typeof param === 'function') {\n    return param(\n      formatDate(store.getState().ticker.currentDate),\n      dateSlice.map((d) => ({ ...d, date: formatDate(d.date) })),\n      store.getState().ticker.dates.map((date) => formatDate(date)),\n    );\n  }\n  if (isDate) {\n    return formatDate(store.getState().ticker.currentDate, param);\n  }\n  return param;\n}\n","import { Data } from './models';\nimport { zeroPad } from './utils';\n\nexport const getDates = (data: Data[]) => Array.from(new Set(data.map((d) => d.date))).sort();\n\nexport function getDateString(inputDate: string | Date) {\n  const date = new Date(inputDate);\n  if (isNaN(+date)) {\n    throw new Error(`\"${inputDate}\" is not a valid date`);\n  }\n\n  const year = date.getFullYear();\n\n  let month = (1 + date.getMonth()).toString();\n  month = zeroPad(month, 2);\n\n  let day = date.getDate().toString();\n  day = zeroPad(day, 2);\n\n  return `${year}${month}${day}`;\n}\n\nexport function formatDate(dateStr: string, format = 'YYYY-MM-DD') {\n  const year = dateStr.slice(0, 4);\n  const month = dateStr.slice(4, 6);\n  const day = dateStr.slice(6, 8);\n  const date = new Date(`${year}-${month}-${day}`);\n  const weekDayIndex = String(date.getDay());\n  const monthNames: { [key: string]: string } = {\n    '01': 'Jan',\n    '02': 'Feb',\n    '03': 'Mar',\n    '04': 'Apr',\n    '05': 'May',\n    '06': 'Jun',\n    '07': 'Jul',\n    '08': 'Aug',\n    '09': 'Sep',\n    '10': 'Oct',\n    '11': 'Nov',\n    '12': 'Dec',\n  };\n\n  const weekDays: { [key: string]: string } = {\n    '0': 'Sun',\n    '1': 'Mon',\n    '2': 'Tue',\n    '3': 'Wed',\n    '4': 'Thu',\n    '5': 'Fri',\n    '6': 'Sat',\n  };\n\n  return format\n    .replace('MMM', monthNames[month])\n    .replace('DDD', weekDays[weekDayIndex])\n    .replace('YYYY', year)\n    .replace('MM', month)\n    .replace('DD', day);\n}\n","import { formatDate, getDateString, getDates } from './dates';\nimport { Data } from './models';\nimport { getColor } from './utils';\nimport { store } from './store';\nimport { Options } from './options';\n\nexport function prepareData(rawData: Data[] | any, transform?: (raw: any) => Data[]) {\n  const options = store.getState().options;\n\n  let data = (transform && typeof transform === 'function'\n    ? transform(rawData)\n    : rawData) as Data[];\n\n  data = data\n    .map((d) => ({ ...d, date: getDateString(d.date) }))\n    .filter((d) => (options.startDate ? d.date >= options.startDate : true))\n    .filter((d) => (options.endDate ? d.date <= options.endDate : true));\n\n  if (options.dataShape === 'wide') {\n    data = wideDataToLong(data);\n  }\n\n  if (options.fillDateGaps) {\n    data = fillGaps(data, options.fillDateGaps);\n  }\n\n  data = data.map((d) => {\n    const value = isNaN(+d.value) ? 0 : +d.value;\n    const color = getColor(d, options.showGroups, options.colorSeed);\n    return { ...d, value, color };\n  });\n\n  data = calculateLastValues(data);\n\n  return data;\n}\n\nfunction calculateLastValues(data: Data[]) {\n  return data\n    .sort((a, b) => a.name.localeCompare(b.name) || a.date.localeCompare(b.date))\n    .reduce((acc: Data[], curr) => {\n      if (acc.length === 0) {\n        curr.lastValue = curr.value;\n      } else {\n        const last = acc[acc.length - 1];\n        if (curr.name === last.name) {\n          curr.lastValue = last.value;\n        } else {\n          curr.lastValue = curr.value;\n        }\n      }\n      return [...acc, curr];\n    }, [])\n    .sort((a, b) => a.date.localeCompare(b.date));\n}\n\nfunction wideDataToLong(wide: any) {\n  const long = [] as Data[];\n  wide.forEach((item: any) => {\n    for (const [key, value] of Object.entries(item)) {\n      long.push({\n        date: item.date,\n        name: key,\n        value: Number(value),\n      });\n    }\n  });\n  return long;\n}\n\nfunction fillGaps(data: Data[], period: Options['fillDateGaps']) {\n  if (!period) {\n    return data;\n  }\n\n  const dates = getDates(data);\n  const minDate = new Date(formatDate(dates[0]));\n  const maxDate = new Date(formatDate(dates[dates.length - 1]));\n\n  const next = {\n    years: (dt: Date) => {\n      dt.setFullYear(dt.getFullYear() + 1);\n    },\n    months: (dt: Date) => {\n      dt.setMonth(dt.getMonth() + 1);\n    },\n    days: (dt: Date) => {\n      dt.setDate(dt.getDate() + 1);\n    },\n  };\n  if (!next[period]) {\n    return data;\n  }\n\n  const dateRange: string[] = [];\n  for (const date = minDate; date < maxDate; next[period](date)) {\n    dateRange.push(getDateString(date));\n  }\n\n  dateRange.forEach((date, index) => {\n    if (data.filter((d) => d.date === date).length > 0) {\n      return;\n    }\n\n    const missing = data\n      .filter((d) => d.date === dateRange[index - 1])\n      .map((d) =>\n        // const value = {\n        //   last: d.value,\n        //   zero: 0,\n        // }\n        ({\n          ...d,\n          date,\n          // value: value[fillDateGapsValue],\n        }),\n      );\n\n    data.push(...missing);\n  });\n\n  return data;\n}\n\nexport function getDateSlice(data: Data[], date: string) {\n  return data\n    .filter((d) => d.date === date && !isNaN(d.value))\n    .sort((a, b) => b.value - a.value)\n    .map((d, i) => ({ ...d, rank: i }));\n}\n","import { elements } from './elements';\nimport { store } from './store';\nimport { Ticker } from './ticker';\nimport { addEventHandler, hideElement } from './utils';\nimport { formatDate } from './dates';\nimport { DOMCustomEvent } from './models';\n\nexport function registerEvents(element: HTMLElement, ticker: Ticker) {\n  registerControlButtonEvents();\n  registerOverlayEvents();\n  registerClickEvents();\n  registerKeyboardEvents();\n\n  function registerControlButtonEvents() {\n    addEventHandler(elements.skipBack, 'click', ticker.skipBack);\n    addEventHandler(elements.play, 'click', ticker.toggle);\n    addEventHandler(elements.pause, 'click', ticker.toggle);\n    addEventHandler(elements.skipForward, 'click', ticker.skipForward);\n  }\n\n  function registerOverlayEvents() {\n    addEventHandler(elements.overlayPlay, 'click', () => {\n      hideElement(elements.overlay);\n      ticker.start();\n    });\n    addEventHandler(elements.overlayRepeat, 'click', () => {\n      hideElement(elements.overlay);\n      ticker.loop();\n      ticker.start();\n    });\n  }\n\n  function registerClickEvents() {\n    if (!store.getState().options.disableClickEvents) {\n      const svg = element.querySelector('svg') as SVGSVGElement;\n      svg.addEventListener('click', ticker.toggle);\n      element.addEventListener('dblclick', ticker.skipForward);\n    }\n  }\n\n  function registerKeyboardEvents() {\n    if (!store.getState().options.disableKeyboardEvents) {\n      document.addEventListener('keypress', function (e) {\n        const keyCodes = {\n          spacebar: 32,\n          a: 97,\n          d: 100,\n          s: 115,\n        };\n\n        // TODO: keyCode is deprecated\n        switch (e.keyCode) {\n          case keyCodes.spacebar:\n            ticker.toggle();\n            break;\n          case keyCodes.a:\n            ticker.skipBack();\n            break;\n          case keyCodes.s:\n            ticker.toggle();\n            break;\n          case keyCodes.d:\n            ticker.skipForward();\n            break;\n        }\n      });\n    }\n  }\n}\n\nfunction dispatchDOMEvent(element: HTMLElement, currentDate: string) {\n  element.dispatchEvent(\n    new CustomEvent('racingBars/dateChanged', {\n      bubbles: true,\n      detail: {\n        date: formatDate(currentDate),\n        isFirst: store.getState().ticker.isFirstDate,\n        isLast: store.getState().ticker.isLastDate,\n      },\n    } as DOMCustomEvent),\n  );\n}\n\nexport function DOMEventSubscriber(element: HTMLElement) {\n  let lastDate = '';\n  return function () {\n    const currentDate = store.getState().ticker.currentDate;\n    if (currentDate !== lastDate) {\n      dispatchDOMEvent(element, currentDate);\n      lastDate = currentDate;\n    }\n  };\n}\n","export const elements = {\r\n  controls: 'controls',\r\n  skipBack: 'skipBack',\r\n  play: 'play',\r\n  pause: 'pause',\r\n  skipForward: 'skipForward',\r\n  overlay: 'overlay',\r\n  overlayPlay: 'overlayPlay',\r\n  overlayRepeat: 'overlayRepeat',\r\n};\r\n","import * as d3 from './d3';\n\nexport function loadData(URL: string, type: 'json' | 'csv' | 'tsv' | 'xml' = 'json') {\n  switch (type) {\n    case 'json':\n      return d3.json(URL);\n    case 'csv':\n      return d3.csv(URL);\n    case 'tsv':\n      return d3.tsv(URL);\n    case 'xml':\n      return d3.xml(URL);\n    default:\n      throw new Error(`Unsupported data type: ${type}`);\n  }\n}\n","import { prepareData } from './data-utils';\nimport { getDates, getDateString, formatDate } from './dates';\nimport { Data } from './models';\nimport { createRenderer } from './renderer';\nimport { createTicker } from './ticker';\nimport * as styles from './styles';\nimport { actions, store } from './store';\nimport { Options } from './options';\nimport { registerEvents, DOMEventSubscriber } from './events';\nimport { createScroller } from './scroller';\n\nexport function race(data: Data[] | any, options: Options, transform?: (raw: any) => Data[]) {\n  store.dispatch(actions.options.optionsLoaded(options));\n\n  const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n  if (!element) {\n    throw new Error('Cannot find element with this selector: ' + store.getState().options.selector);\n  }\n\n  if (store.getState().options.injectStyles) {\n    styles.styleInject(store.getState().options.selector, 'top');\n  }\n\n  const preparedData = prepareData(data, transform);\n\n  const dates = getDates(preparedData);\n\n  const ticker = createTicker(dates);\n\n  const renderer = createRenderer(preparedData);\n  renderer.renderInitalView();\n\n  store.subscribe(renderer.renderFrame);\n  store.subscribe(DOMEventSubscriber(element));\n\n  ticker.start();\n\n  if (!store.getState().options.autorun) {\n    ticker.stop();\n  }\n\n  registerEvents(element, ticker);\n  window.addEventListener('resize', resize);\n\n  function resize() {\n    renderer.resize();\n    registerEvents(element, ticker);\n  }\n\n  return {\n    // TODO: validate user input\n    start: () => {\n      if (!store.getState().ticker.isRunning) {\n        ticker.start();\n      }\n    },\n    stop: () => {\n      ticker.stop();\n    },\n    rewind: () => {\n      ticker.skipBack();\n    },\n    fastforward: () => {\n      ticker.skipForward();\n    },\n    loop: () => {\n      ticker.loop();\n    },\n    inc: (value = 1) => {\n      store.dispatch(actions.ticker.inc(value));\n    },\n    dec: (value = 1) => {\n      store.dispatch(actions.ticker.dec(value));\n    },\n    getDate: () => store.getState().ticker.currentDate,\n    setDate: (inputDate: string | Date) => {\n      store.dispatch(actions.ticker.updateDate(getDateString(inputDate)));\n    },\n    getAllDates: () => dates.map((date: string) => formatDate(date)),\n    createScroller: () => {\n      createScroller(element);\n    },\n  };\n}\n","import { styles } from './styles';\n\n// slightly modifed from https://github.com/egoist/style-inject\nexport function styleInject(selector: string, insertAt = 'top', css = styles) {\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  // replace with selector\n  css = css.split('#selector').join(selector);\n\n  const head = document.head || document.getElementsByTagName('head')[0];\n  const style = document.createElement('style') as HTMLStyleElement | any;\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n","import * as d3 from './d3';\n\nimport { icons } from './icons';\nimport { elements } from './elements';\nimport { Data, Renderer } from './models';\nimport { store } from './store';\nimport {\n  getHeight,\n  getWidth,\n  getElement,\n  hideElement,\n  showElement,\n  getText,\n  getColor,\n  getIconID,\n} from './utils';\nimport { getDateSlice } from './data-utils';\n\nexport function createRenderer(data: Data[]): Renderer {\n  let margin: { top: number; right: number; bottom: number; left: number };\n  let svg: any;\n  let x: d3.ScaleLinear<number, number>;\n  let y: d3.ScaleLinear<number, number>;\n  let xAxis: d3.Axis<number | { valueOf(): number }>;\n  let barPadding: number;\n  let labelPadding: number;\n  let barHeight: number;\n  let barHalfHeight: number;\n  let defs: any;\n  let iconSize: number;\n  let iconSpace: number;\n  let titleText: any;\n  let subTitleText: any;\n  let captionText: any;\n  let dateCounterText: any;\n  let labelX: number | ((d: Data) => number);\n  let barY: (d: Data) => number;\n  let height: number;\n  let width: number;\n\n  function renderInitalView() {\n    const {\n      selector,\n      title,\n      subTitle,\n      caption,\n      dateCounter,\n      labelsOnBars,\n      showIcons,\n      labelsWidth,\n      inputHeight,\n      inputWidth,\n      minHeight,\n      minWidth,\n      topN,\n    } = store.getState().options;\n\n    const TotalDateSlice = getDateSlice(data, store.getState().ticker.currentDate);\n    const dateSlice = TotalDateSlice.slice(0, store.getState().options.topN);\n    const element = document.querySelector(selector) as HTMLElement;\n    element.innerHTML = '';\n\n    height = getHeight(element, minHeight, inputHeight);\n    width = getWidth(element, minWidth, inputWidth);\n\n    renderInitialFrame();\n    renderControls();\n    renderOverlays();\n    updateControls();\n\n    function renderInitialFrame() {\n      const groups = Array.from(new Set(data.map((d) => d.group)))\n        .filter(Boolean)\n        .sort() as string[];\n      const showGroups = store.getState().options.showGroups && groups.length > 0;\n      const groupsArea = showGroups ? 40 : 0;\n\n      const labelsArea = labelsOnBars ? 0 : labelsWidth;\n\n      margin = {\n        top: 80 + groupsArea,\n        right: 0,\n        bottom: 5,\n        left: 0 + labelsArea,\n      };\n\n      x = d3\n        .scaleLinear()\n        .domain([0, d3.max(dateSlice, (d: Data) => d.value) as number])\n        .range([margin.left, width - margin.right - 65]);\n\n      y = d3\n        .scaleLinear()\n        .domain([topN, 0])\n        .range([height - margin.bottom, margin.top]);\n\n      barPadding = (height - (margin.bottom + margin.top)) / (topN * 5);\n      labelPadding = 8;\n      barHeight = y(1) - y(0) - barPadding;\n      barHalfHeight = (y(1) - y(0)) / 2 + 1;\n      barY = (d: Data) => y(d.rank as number) + 5;\n      iconSize = showIcons ? barHeight * 0.9 : 0;\n      iconSpace = showIcons ? iconSize + labelPadding : 0;\n      labelX = labelsOnBars\n        ? (d: Data) => x(d.value) - labelPadding - iconSpace\n        : margin.left - labelPadding;\n\n      svg = d3 //\n        .select(selector)\n        .append('svg')\n        .attr('width', width)\n        .attr('height', height);\n\n      titleText = svg //\n        .append('text')\n        .attr('class', 'title')\n        .attr('y', 24)\n        .html(getText(title, TotalDateSlice));\n\n      subTitleText = svg //\n        .append('text')\n        .attr('class', 'subTitle')\n        .attr('y', 55)\n        .html(getText(subTitle, TotalDateSlice));\n\n      if (showGroups) {\n        const groupX = d3\n          .scaleLinear()\n          .domain([groups.length, 0])\n          .range([width - margin.right, margin.left]);\n\n        svg\n          .selectAll('rect.group-color')\n          .data(groups)\n          .enter()\n          .append('rect')\n          .attr('class', 'group-color')\n          .attr('width', 10)\n          .attr('height', 10)\n          .attr('x', (_d: string, i: number) => groupX(i))\n          .attr('y', 75)\n          .style('fill', (d: string) =>\n            getColor({ group: d } as Data, true, store.getState().options.colorSeed).toString(),\n          );\n\n        svg\n          .selectAll('text.group')\n          .data(groups)\n          .enter()\n          .append('text')\n          .attr('class', 'group')\n          .attr('x', (_d: string, i: number) => groupX(i) + 20)\n          .attr('y', 75 + 10)\n          .html((d: string) => d);\n      }\n\n      xAxis = d3\n        .axisTop(x)\n        .ticks(width > 500 ? 5 : 2)\n        .tickSize(-(height - (margin.top + margin.bottom)))\n        .tickFormat((n: number | { valueOf(): number }) => d3.format(',')(n));\n\n      svg\n        .append('g')\n        .attr('class', 'axis xAxis')\n        .attr('transform', `translate(0, ${margin.top})`)\n        .call(xAxis)\n        .selectAll('.tick line')\n        .classed('origin', (d: number) => d === 0);\n\n      svg\n        .selectAll('rect.bar')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('rect')\n        .attr('class', 'bar')\n        .attr('x', x(0) + 1)\n        .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n        .attr('y', barY)\n        .attr('height', barHeight)\n        .style('fill', (d: Data) => d.color);\n\n      svg\n        .selectAll('text.label')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('text')\n        .attr('class', 'label')\n        .attr('x', labelX)\n        .attr('y', (d: Data) => barY(d) + barHalfHeight)\n        .style('text-anchor', 'end')\n        .html((d: Data) => d.name);\n\n      svg\n        .selectAll('text.valueLabel')\n        .data(dateSlice, (d: Data) => d.name)\n        .enter()\n        .append('text')\n        .attr('class', 'valueLabel')\n        .attr('x', (d: Data) => x(d.value) + 5)\n        .attr('y', (d: Data) => barY(d) + barHalfHeight)\n        .text((d: Data) => d3.format(',.0f')(d.lastValue as number));\n\n      if (showIcons) {\n        defs = svg.append('svg:defs');\n\n        defs\n          .selectAll('svg')\n          .data(dateSlice, (d: Data) => d.name)\n          .enter()\n          .append('svg:pattern')\n          .attr('class', 'svgpattern')\n          .attr('id', getIconID)\n          .attr('width', iconSize)\n          .attr('height', iconSize)\n          .append('svg:image')\n          .attr('xlink:href', (d: Data) => d.icon)\n          .attr('width', iconSize)\n          .attr('height', iconSize)\n          .attr('x', 0)\n          .attr('y', 0);\n\n        svg\n          .selectAll('circle')\n          .data(dateSlice, (d: Data) => d.name)\n          .enter()\n          .append('circle')\n          .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n          .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight)\n          .attr('r', iconSize / 2)\n          .style('fill', 'transparent')\n          .style('fill', (d: Data) => `url(#${getIconID(d)})`);\n      }\n\n      const strokeWidth = 10;\n      dateCounterText = svg\n        .append('text')\n        .attr('class', 'dateCounterText')\n        .attr('x', width - margin.right - barPadding)\n        .attr('y', height - 40)\n        .style('text-anchor', 'end')\n        .html(getText(dateCounter, TotalDateSlice, true))\n        .call(halo, strokeWidth);\n\n      captionText = svg\n        .append('text')\n        .attr('class', 'caption')\n        .attr('x', width - margin.right - barPadding - strokeWidth)\n        .attr('y', height - margin.bottom - barPadding)\n        .style('text-anchor', 'end')\n        .html(getText(caption, TotalDateSlice));\n\n      // TODO: animate halo\n      function halo(text: any, strokeWidth: number) {\n        text\n          .select(function () {\n            return this.parentNode.insertBefore(this.cloneNode(true), this);\n          })\n          .style('fill', '#ffffff')\n          .style('stroke', '#ffffff')\n          .style('stroke-width', strokeWidth)\n          .style('stroke-linejoin', 'round')\n          .style('opacity', 1);\n      }\n    }\n\n    function renderControls() {\n      const controlIcons = [\n        { skipBack: icons.skipBack },\n        { play: icons.play },\n        { pause: icons.pause },\n        { skipForward: icons.skipForward },\n      ];\n\n      const elementWidth = element.getBoundingClientRect().width;\n\n      d3.select(selector)\n        .append('div')\n        .classed('controls', true)\n        .style('width', width)\n        .style('right', elementWidth - width + margin.right + barPadding + 'px')\n        .selectAll('div')\n        .data(controlIcons)\n        .enter()\n        .append('div')\n        .html((d) => Object.values(d)[0] as string)\n        .attr('class', (d) => Object.keys(d)[0]);\n\n      if (store.getState().options.showControls === 'play') {\n        hideElement(elements.skipBack);\n        hideElement(elements.skipForward);\n      }\n      if (store.getState().options.showControls === 'none') {\n        hideElement(elements.controls);\n      }\n    }\n\n    function renderOverlays() {\n      const overlayIcons = [\n        { overlayPlay: icons.overlayPlay },\n        { overlayRepeat: icons.overlayRepeat },\n      ];\n\n      d3.select(selector)\n        .append('div')\n        .classed('overlay', true)\n        .style('minHeight', minHeight + 'px')\n        .style('minWidth', minWidth + 'px')\n        .selectAll('div')\n        .data(overlayIcons)\n        .enter()\n        .append('div')\n        .html((d) => Object.values(d)[0] as string)\n        .attr('class', (d) => Object.keys(d)[0]);\n    }\n  }\n\n  function renderFrame() {\n    if (!x) {\n      return;\n    }\n\n    const { tickDuration, topN, title, subTitle, caption, dateCounter } = store.getState().options;\n    const TotalDateSlice = getDateSlice(data, store.getState().ticker.currentDate);\n    const dateSlice = TotalDateSlice.slice(0, store.getState().options.topN);\n\n    x.domain([0, d3.max(dateSlice, (d: Data) => d.value) as number]);\n\n    svg //\n      .select('.xAxis')\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .call(xAxis);\n\n    const bars = svg //\n      .selectAll('.bar')\n      .data(dateSlice, (d: Data) => d.name);\n\n    bars\n      .enter()\n      .append('rect')\n      .attr('class', (d: Data) => `bar ${d.name.replace(/\\s/g, '_')}`)\n      .attr('x', x(0) + 1)\n      .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n      .attr('y', () => y(topN + 1) + 5)\n      .attr('height', barHeight)\n      .style('fill', (d: Data) => d.color)\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', barY);\n\n    bars\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n      .attr('y', barY);\n\n    bars\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('width', (d: Data) => Math.abs(x(d.value) - x(0) - 1))\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    const labels = svg //\n      .selectAll('.label')\n      .data(dateSlice, (d: Data) => d.name);\n\n    labels\n      .enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('x', labelX)\n      .attr('y', () => y(topN + 1) + 5 + barHalfHeight)\n      .style('text-anchor', 'end')\n      .html((d: Data) => d.name)\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    labels\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', labelX)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    labels\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', labelX)\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    const valueLabels = svg //\n      .selectAll('.valueLabel')\n      .data(dateSlice, (d: Data) => d.name);\n\n    valueLabels\n      .enter()\n      .append('text')\n      .attr('class', 'valueLabel')\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', () => y(topN + 1) + 5)\n      .text((d: Data) => d3.format(',.0f')(d.lastValue as number))\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight);\n\n    valueLabels\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', (d: Data) => barY(d) + barHalfHeight)\n      .tween('text', function (d: Data) {\n        const i = d3.interpolateRound(d.lastValue as number, d.value);\n        return function (t: number) {\n          this.textContent = d3.format(',')(i(t));\n        };\n      });\n\n    valueLabels\n      .exit()\n      .transition()\n      .duration(tickDuration)\n      .ease(d3.easeLinear)\n      .attr('x', (d: Data) => x(d.value) + 5)\n      .attr('y', () => y(topN + 1) + 5)\n      .remove();\n\n    if (store.getState().options.showIcons) {\n      const iconPatterns = defs.selectAll('.svgpattern').data(dateSlice, (d: Data) => d.name);\n\n      iconPatterns\n        .enter()\n        .append('svg:pattern')\n        .attr('class', 'svgpattern')\n        .attr('id', getIconID)\n        .attr('width', iconSize)\n        .attr('height', iconSize)\n        .append('svg:image')\n        .attr('xlink:href', (d: Data) => d.icon)\n        .attr('width', iconSize)\n        .attr('height', iconSize)\n        .style('z-index', '99')\n        .attr('x', 0)\n        .attr('y', 0);\n\n      iconPatterns.exit().remove();\n\n      const icons = svg //\n        .selectAll('circle')\n        .data(dateSlice, (d: Data) => d.name);\n\n      icons\n        .enter()\n        .append('circle')\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', () => y(topN + 1) + iconSize + barHalfHeight)\n        .attr('r', iconSize / 2)\n        .style('z-index', '99')\n        .style('fill', 'transparent')\n        .style('fill', (d: Data) => `url(#${getIconID(d)})`)\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight);\n\n      icons\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', (d: Data) => y(d.rank as number) + barHalfHeight);\n\n      icons\n        .exit()\n        .transition()\n        .duration(tickDuration)\n        .ease(d3.easeLinear)\n        .attr('cx', (d: Data) => x(d.value) - iconSize / 2 - labelPadding)\n        .attr('cy', () => y(topN + 1) + iconSize + barHalfHeight)\n        .remove();\n    }\n\n    titleText.html(getText(title, TotalDateSlice));\n    subTitleText.html(getText(subTitle, TotalDateSlice));\n    captionText.html(getText(caption, TotalDateSlice));\n    dateCounterText.html(getText(dateCounter, TotalDateSlice, true));\n\n    updateControls();\n  }\n\n  function resize() {\n    if (\n      (!store.getState().options.inputHeight && !store.getState().options.inputWidth) ||\n      String(store.getState().options.inputHeight).startsWith('window') ||\n      String(store.getState().options.inputWidth).startsWith('window')\n    ) {\n      const element = document.querySelector(store.getState().options.selector) as HTMLElement;\n\n      height = getHeight(\n        element,\n        store.getState().options.minHeight,\n        store.getState().options.inputHeight,\n      );\n      width = getWidth(\n        element,\n        store.getState().options.minWidth,\n        store.getState().options.inputWidth,\n      );\n\n      const currentPosition = element.style.position; // \"fixed\" if scrolling\n      renderInitalView();\n      renderFrame();\n      updateControls();\n      element.style.position = currentPosition;\n    }\n  }\n\n  function updateControls() {\n    const showOverlays = store.getState().options.showOverlays;\n\n    if (store.getState().ticker.isRunning) {\n      showElement(elements.pause);\n      hideElement(elements.play);\n    } else {\n      showElement(elements.play);\n      hideElement(elements.pause);\n    }\n\n    if (\n      store.getState().ticker.isFirstDate &&\n      (showOverlays === 'all' || showOverlays === 'play') &&\n      !store.getState().ticker.isRunning\n    ) {\n      getElement(elements.controls).style.visibility = 'hidden';\n      showElement(elements.overlay);\n      showElement(elements.overlayPlay);\n      hideElement(elements.overlayRepeat);\n    } else if (\n      store.getState().ticker.isLastDate &&\n      (showOverlays === 'all' || showOverlays === 'repeat') &&\n      !(store.getState().options.loop && store.getState().ticker.isRunning)\n    ) {\n      getElement(elements.controls).style.visibility = 'hidden';\n      showElement(elements.overlay);\n      showElement(elements.overlayRepeat);\n      hideElement(elements.overlayPlay);\n    } else {\n      getElement(elements.controls).style.visibility = 'unset';\n      getElement(elements.overlay).style.display = 'none';\n    }\n  }\n\n  return {\n    renderInitalView,\n    renderFrame,\n    resize,\n  };\n}\n","import { store, actions } from './store';\r\n\r\nexport function createScroller(element: HTMLElement) {\r\n  const dates = store.getState().ticker.dates;\r\n  prepareDOM();\r\n\r\n  const step = document.body.clientHeight / dates.length;\r\n\r\n  subscribeToEvents();\r\n\r\n  function prepareDOM() {\r\n    element.style.position = 'fixed';\r\n    element.style.top = '0';\r\n\r\n    const scrollElement = document.createElement('div');\r\n    scrollElement.style.height = window.innerHeight * 10 + 'px';\r\n    document.body.appendChild(scrollElement);\r\n  }\r\n\r\n  function subscribeToEvents() {\r\n    window.addEventListener('scroll', goToDate);\r\n    // element.addEventListener(\"dateChanged\", scrollToPosition);\r\n  }\r\n\r\n  // function scrollToPosition(e: CustomEvent) {\r\n  //   let currentDate = getDateString(e.detail.date);\r\n  //   let index = dates.indexOf(currentDate);\r\n  //   ignoreNextScrollEvent = true;\r\n  //   window.scroll({\r\n  //     top: index * step,\r\n  //     behavior: \"smooth\",\r\n  //   });\r\n  // }\r\n\r\n  function goToDate() {\r\n    const index = Math.ceil(window.pageYOffset / step);\r\n    if (index < dates.length) {\r\n      store.dispatch(actions.ticker.updateDate(dates[index]));\r\n    } else {\r\n      store.dispatch(actions.ticker.setLast());\r\n    }\r\n  }\r\n}\r\n"],"names":["actionTypes","optionsLoaded","changeOptions","optionsChanged","initialState","selector","dataShape","fillDateGaps","fillDateGapsValue","startDate","endDate","colorSeed","showGroups","tickDuration","topN","disableClickEvents","disableKeyboardEvents","autorun","loop","injectStyles","title","subTitle","caption","dateCounter","labelsOnBars","labelsWidth","showIcons","showControls","showOverlays","inputHeight","inputWidth","minHeight","minWidth","height","width","optionsReducer","state","action","type","payload","getDateString","initialize","updateDate","setRunning","setFirst","setLast","inc","dec","isRunning","currentDate","isFirstDate","isLastDate","dates","tickerReducer","indexOf","length","currentIndex","lastIndex","incValue","newDate","decValue","createTicker","ticker","start","d3","_","store","getState","options","stop","dispatch","actions","skipBack","skipForward","toggle","goToDate","date","running","value","rootReducer","reducer","preloadedState","subscribers","forEach","fn","subscribe","push","index","unsubscribe","splice","createStore","getColor","d","seed","s","nums","i","zeroPad","String","charCodeAt","toNumbers","group","name","x","Math","sin","floor","getIconID","toLowerCase","split","join","n","w","toString","getHeight","element","newHeight","startsWith","scale","window","innerHeight","getBoundingClientRect","getWidth","newWidth","innerWidth","getElement","className","document","querySelector","showElement","style","display","hideElement","addEventHandler","event","handler","addEventListener","getText","param","dateSlice","isDate","formatDate","map","getDates","data","Array","from","Set","sort","inputDate","Date","isNaN","Error","year","getFullYear","month","getMonth","getDate","dateStr","format","slice","day","weekDayIndex","getDay","replace","01","02","03","04","05","06","07","08","09","10","11","12","0","1","2","3","4","5","6","getDateSlice","filter","a","b","rank","registerEvents","e","keyCode","prefix","fill","random","substr","randomString","URL","transform","insertAt","css","head","getElementsByTagName","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","styles","preparedData","rawData","long","item","Object","entries","Number","period","minDate","maxDate","next","years","dt","setFullYear","months","setMonth","days","setDate","dateRange","missing","fillGaps","localeCompare","reduce","acc","curr","lastValue","last","calculateLastValues","color","prepareData","renderer","margin","svg","y","xAxis","barPadding","labelPadding","barHeight","barHalfHeight","defs","iconSize","iconSpace","titleText","subTitleText","captionText","dateCounterText","labelX","barY","renderInitalView","overlayIcons","controlIcons","elementWidth","TotalDateSlice","innerHTML","groups","Boolean","top","right","bottom","left","domain","range","append","attr","html","groupX","selectAll","enter","_d","ticks","tickSize","tickFormat","call","classed","abs","text","icon","strokeWidth","select","parentNode","this","cloneNode","renderInitialFrame","play","pause","values","keys","overlayPlay","overlayRepeat","updateControls","renderFrame","transition","duration","ease","bars","exit","remove","labels","valueLabels","tween","t","textContent","iconPatterns","icons","visibility","resize","currentPosition","position","createRenderer","lastDate","dispatchEvent","CustomEvent","bubbles","detail","isFirst","isLast","dispatchDOMEvent","DOMEventSubscriber","rewind","fastforward","getAllDates","createScroller","scrollElement","body","prepareDOM","step","clientHeight","ceil","pageYOffset"],"mappings":"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"}