<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <style>
    #container {
      height: 95vh;
      /* width: 95vw; */
      width: 100%;
      margin-top: 15px;
    }
    .race {
      margin: auto;
      height: 100%;
      width: 95%;
      /* width: 80vw;
      position: fixed;
      top: 0; */
    }
    .story {
      margin-left: 80vw;
    }
    .p1 {
      margin-top: 300px;
    }
    .links a {
      display: inline-block;
      width: 10%;
      text-align: center;
      background-color: azure;
      border: #777777 1px solid;
      margin: 3%;
      padding: 15px;
      font-size: large;
    }
  </style>
</head>

<body>
  <div id="container">
    <div id="race" class="race"></div>
    <!-- <div class="links">
      <a href="#" class="link-rewind"><<</a>
      <a href="#" class="link-start">Start</a>
      <a href="#" class="link-stop">Stop</a>
      <a href="#" class="link-fastforward">>></a>
      <a href="#" class="link-random">random</a>
    </div> -->
    <!-- <div class="story">
      <p class="p1">hi there</p>
      <p class="p1">hi there</p>
      <p class="p1">hi there</p>
      <p class="p1">hi there</p>
    </div> -->
  </div>

  <script src="d3.v5.min.js"></script>
  <!-- <script src="../build/module/lib/racing-bars.js" type="module"></script> -->
  <script type="module">
import { race, loadData } from '../build/module/lib/racing-bars.js';

    let options = {
      // dataShape: "wide",
      // fillDateGaps: "months",
      // fillDateGapsValue: "zero",
      title: "A Tale of 11 Years",
      subTitle: "Top 10 Surgical Procedures",
      dateCounterFormat: "MM/YYYY",
      caption: "Aswan Heart Centre",
      // startDate: "2009-1-1",
      // endDate: "2010-12-31",
      // loop: true,
      // tickDuration: 500,
      // top_n: 10,
      // height: "window*0.85",
      // width: "window*0.9",
      // disableClickEvents: true,
      // disableKeyboardEvents: true,
      // showControls: "play",
      autorun: false,
      // colorSeed: "asdfs",
      // labelsOnBars: false,
      // labelsWidth: 250,
    };

    // loadData("data/procedures.csv", "csv").then((data) => {
    //   let racer = race(data, options);
    // });

    // loadData("data/procedures.json").then((data) => {
    //   race(data, options);
    // });
    // loadData("data/procedures_wide.csv", "csv").then((data) => {
    //   race(data, options);
    // });
    // loadData("data/covid-19.csv", "csv").then((data) => {
    //   race(data, options);
    // });

    loadData("../data/procedures.json").then((data) => {
      let racer = race(data, options);
      // racer.createScroller();

      // document.querySelector(".link-rewind").addEventListener("click", (e) => {
      //   racer.rewind();
      //   e.preventDefault();
      // });

      // document.querySelector(".link-start").addEventListener("click", (e) => {
      //   racer.start();
      //   e.preventDefault();
      // });

      // document.querySelector(".link-stop").addEventListener("click", (e) => {
      //   e.preventDefault();
      //   racer.stop();
      // });

      // document.querySelector(".link-fastforward").addEventListener("click", (e) => {
      //   racer.fastforward();
      //   e.preventDefault();
      // });

      // document.querySelector(".link-random").addEventListener("click", (e) => {
      //   let dates = racer.getDates();
      //   let date = dates[Math.floor(Math.random() * dates.length)];
      //   // console.log(dates);
      //   racer.setDate(date);

      //   e.preventDefault();
      // });

    });

    // loadData("data/procedures_wide.json").then((data) => {
    //   race(data, options);
    // });
  </script>
</body>
